import{d as b,m as F,C as Z,l as At,q as Ue,I as Et,E as i,H as e,M as E,U as r,a0 as T,u as _,a2 as y,a6 as V,F as L,P as N,a3 as K,a5 as be,Q as x,W as De,V as ee,a7 as _t,a1 as Mt,v as Fe,G as d}from"./Dp9Ai0YM.js";import{a as We,d as He,h as It,u as St,g as Pt}from"./BIGBsnYa.js";import{useAgentConfigStore as Ge}from"./DQkE4eCE.js";import{u as jt}from"./CvcfNFlW.js";import{_ as $t}from"./DlAUqK2U.js";import"./bq2zsT37.js";const Bt=()=>{const j=We(),Ee=Ge(),M=He(),le=b(!1),W=b(!1),z=b(null),p=b(null),A=b(null),I=b("idle"),re=b(!0),te=b(null),se=b(!1),_e=F(()=>{const l=p.value?.agent?.name&&p.value?.agent?.title&&p.value?.agent?.id,a=Ee.hasValidAgent,u=p.value?.widget?.buttonText;return l||a||u}),ie=l=>{const a=l.replace("#",""),u=parseInt(a.substring(0,2),16),m=parseInt(a.substring(2,4),16),g=parseInt(a.substring(4,6),16);return`${u}, ${m}, ${g}`},de=(l,a)=>{try{const u=l.replace("#",""),m=parseInt(u.substr(0,2),16),g=parseInt(u.substr(2,2),16),c=parseInt(u.substr(4,2),16),v=P=>{const h=P+P*a/100;return Math.max(0,Math.min(255,Math.round(h)))};return`rgb(${v(m)}, ${v(g)}, ${v(c)})`}catch{return l}},J=l=>({none:"0px",sm:"6px",md:"12px",lg:"16px",full:"50px"})[l]||"12px",Me=l=>{if(!l)return"";const u=Math.floor((new Date().getTime()-l.getTime())/1e3);return u<60?`il y a ${u}s`:u<3600?`il y a ${Math.floor(u/60)}min`:u<86400?`il y a ${Math.floor(u/3600)}h`:l.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},O=l=>({general:"Conseiller commercial",product_specialist:"Sp√©cialiste produit",support:"Conseiller support",upsell:"Conseiller premium"})[l]||"Vendeur IA",ue=()=>[{value:"auto",label:"üéØ D√©tection automatique",description:"Le syst√®me d√©tecte automatiquement le type"},{value:"jeu",label:"üéÆ Jeux",description:"Jeux de soci√©t√©, cartes, etc."},{value:"livre",label:"üìö Livres",description:"Livres, romans, manuels"},{value:"formation",label:"üéì Formations",description:"Cours en ligne, formations"},{value:"smartphone",label:"üì± Smartphones",description:"T√©l√©phones, accessoires mobiles"},{value:"ordinateur",label:"üíª Ordinateurs",description:"PC, laptops, composants"},{value:"v√™tement",label:"üëó V√™tements",description:"Mode, accessoires vestimentaires"},{value:"service",label:"üîß Services",description:"Consultations, prestations"},{value:"bijou",label:"üíé Bijoux",description:"Bijoux, montres, accessoires"},{value:"produit",label:"üì¶ Autre produit",description:"Sp√©cifiez votre type de produit"}],xe=(l,a)=>{if(l==="produit"&&a)return a;const u=ue().find(m=>m.value===l);return u?u.label:"üéØ D√©tection automatique"},Ie=()=>'${greeting} üëã Je suis ${agentName}, ${agentTitle} chez ${shopName}.\n\nJe vois que vous vous int√©ressez √† notre ${productType} "${productName}". Excellent choix ! ‚ú®\n\nComment puis-je vous aider avec ce ${productType} ? üòä',ce=F(()=>{const l=A.value?.agent?.welcomeMessage||p.value?.agent?.welcomeMessage;if(!l)return"";const a=A.value?.agent?.name||p.value?.agent?.name||"Assistant",u=A.value?.agent?.title||p.value?.agent?.title||O(A.value?.agent?.type||"general"),m=A.value?.agent?.shopName||p.value?.agent?.shopName||"Votre Boutique",g=new Date().getHours(),c=g<12?"Bonjour":(g<18,"Bonsoir");let v="produit";const P=A.value?.agent?.productType||p.value?.agent?.productType,h=A.value?.agent?.customProductType||p.value?.agent?.customProductType;return P==="produit"&&h?v=h:P!=="auto"&&(v=ue().find(k=>k.value===P)?.label.replace(/[üéØüéÆüìöüéìüì±üíªüëóüîßüíéüì¶]/g,"").trim().toLowerCase()||"produit"),l.replace(/\$\{agentName\}/g,`<strong>${a}</strong>`).replace(/\$\{agentTitle\}/g,`<strong>${u}</strong>`).replace(/\$\{shopName\}/g,`<strong>${m}</strong>`).replace(/\$\{productName\}/g,"<strong>Nom du Produit</strong>").replace(/\$\{productType\}/g,`<strong>${v}</strong>`).replace(/\$\{greeting\}/g,`<strong>${c}</strong>`).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br>")}),Se=async l=>{try{if(console.log("üß™ [testWelcomeMessage] Test message d'accueil avec vraie API..."),!l)throw new Error("Agent ID manquant");const a=await $fetch("/api/v1/public/chat",{method:"POST",baseURL:M.public.apiBaseUrl,headers:{"Content-Type":"application/json"},body:{message:"Bonjour",shopId:j.user?.id||j.userShopId||"demo-shop",conversationId:null,productInfo:{name:A.value?.agent?.customProductType||"Produit de test",price:29900,id:"test-product-123"},visitorId:`test-visitor-${Date.now()}`,isFirstMessage:!0}});if(a.success)return{success:!0,message:a.data.message,isWelcome:a.data.isWelcomeMessage||!0};throw new Error(a.error||"Erreur lors du test du message d'accueil")}catch(a){return console.error("‚ùå Erreur test message d'accueil:",a),{success:!1,error:a.response?.data?.error||a.message||"Erreur lors du test du message d'accueil"}}},ge=F(()=>{console.log("üîß [integrationCode] G√©n√©ration du code d'int√©gration avec welcomeMessage...");let l=null,a="",u="",m="",g=null,c=null;if(p.value?.agent?.id&&p.value?.agent?.name?(l=p.value.agent,c=p.value.widget,a=l.id,u=l.name,m=l.title||O(l.type),g=l.welcomeMessage):A.value?.agent?.name&&(l=A.value.agent,c=A.value.widget,a=l.id||"temp-agent",u=l.name,m=l.title||O(l.type||"general"),g=l.welcomeMessage),!l||!a||!u)return"<!-- ‚è≥ Chargement de la configuration du Vendeur IA... -->";try{const v=j.user?.id||j.userShopId||"demo-shop",P=c?.buttonText||"Parler au vendeur",h=c?.primaryColor||"#EC4899",ne=c?.position||"above-cta",k=c?.theme||"modern",s=c?.language||"fr",H=c?.borderRadius||"md",U=de(h,-15),Y=J(H),ae="https://widget.chatseller.app",je=M.public.apiBaseUrl||"https://chatseller-api-production.up.railway.app";return`<!-- ü§ñ ChatSeller Widget v1.5.1 - ${u}, ${m} IA -->

<script>
(function() {
  'use strict';
  
  // ‚úÖ Configuration ChatSeller Widget
  window.ChatSellerConfig = {
    shopId: '${v}',
    agentId: '${a}',
    apiUrl: '${je}',
    buttonText: '${P.replace(/'/g,"\\'")}',
    primaryColor: '${h}',
    position: '${ne}',
    theme: '${k}',
    language: '${s}',
    borderRadius: '${H}',
    autoDetectProduct: true,
    debug: false,
    disableFallback: false,
    agentConfig: {
      id: '${a}',
      name: '${u.replace(/'/g,"\\'")}',
      title: '${m.replace(/'/g,"\\'")}',
      welcomeMessage: ${g?`'${g.replace(/'/g,"\\'").replace(/\n/g,"\\n")}'`:"null"},
      fallbackMessage: '${(l.fallbackMessage||"Un instant, je transmets votre question au Service Client.").replace(/'/g,"\\'")}',
      personality: '${l.personality||"friendly"}',
      productType: '${l.customProductType||l.productType||"auto"}', 
      shopName: '${l.shopName||"cette boutique en ligne"}',
      avatar: '${l.avatar||""}'
    }
  };
  
  // ‚úÖ PROTECTION ANTI-DOUBLE CHARGEMENT
  if (window.ChatSellerInitialized) {
    console.log('‚ö†Ô∏è ChatSeller: D√©j√† initialis√©');
    return;
  }
  window.ChatSellerInitialized = true;
  
  // ‚úÖ NETTOYAGE PR√âVENTIF 
  function cleanupExistingWidgets() {
    const selectors = [
      '#chatseller-widget',
      '#chatseller-modal',
      '[data-chatseller]',
      '.chatseller-widget',
      '#chatseller-fallback' 
    ];
    
    selectors.forEach(selector => {
      const elements = document.querySelectorAll(selector);
      elements.forEach(el => el.remove());
    });
  }
  
  // ‚úÖ CSS CRITIQUE
  function injectCriticalCSS() {
    if (document.getElementById('chatseller-critical-css')) return;
    
    const style = document.createElement('style');
    style.id = 'chatseller-critical-css';
    style.textContent = \`
/* üé® CHATSELLER CSS CORRIG√â */
.cs-chatseller-widget, .cs-chatseller-widget * {
  all: unset !important;
  box-sizing: border-box !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
}

.cs-chatseller-widget {
  position: relative !important;
  z-index: 999999 !important;
  display: block !important;
  margin: 8px 0 !important;
  width: 100% !important;
  contain: layout style !important;
  isolation: isolate !important;
}

/* ‚úÖ CORRECTION MAJEURE : BOUTON TRIGGER AVEC IC√îNE FORC√âE ET COULEUR DYNAMIQUE */
.cs-chat-trigger-button {
  width: 100% !important;
  padding: 16px 24px !important;
  background: linear-gradient(135deg, ${h} 0%, ${U} 100%) !important;
  color: white !important;
  border: none !important;
  border-radius: ${Y} !important;
  font-size: 15px !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  box-shadow: 0 8px 25px rgba(${ie(h)}, 0.3) !important;
  font-family: inherit !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 8px !important;
  outline: none !important;
  min-height: 56px !important;
  margin: 0 !important;
  text-transform: none !important;
  letter-spacing: normal !important;
  opacity: 1 !important;
  visibility: visible !important;
  position: relative !important;
  z-index: 999999 !important;
}

.cs-chat-trigger-button:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 12px 35px rgba(${ie(h)}, 0.4) !important;
}

/* ‚úÖ CORRECTION MAJEURE : Styles SVG forc√©s avec !important maximal */
.cs-chat-trigger-button svg {
  width: 20px !important;
  height: 20px !important;
  fill: none !important;
  stroke: currentColor !important;
  stroke-width: 2 !important;
  flex-shrink: 0 !important;
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  position: relative !important;
  z-index: 999999 !important;
  pointer-events: none !important;
  min-width: 20px !important;
  max-width: 20px !important;
  min-height: 20px !important;
  max-height: 20px !important;
  color: white !important;
  stroke: white !important;
}

.cs-chat-trigger-button svg * {
  fill: none !important;
  stroke: white !important;
  stroke-width: 2 !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  pointer-events: none !important;
  color: white !important;
  stroke: white !important;
}
    \`;
    document.head.appendChild(style);
  }
  
  // ‚úÖ FONCTION DE CHARGEMENT PRINCIPALE
  function loadChatSellerWidget() {
    console.log('üöÄ ChatSeller: Chargement widget avec message d'accueil...');
    
    cleanupExistingWidgets();
    injectCriticalCSS();
    
    if (window.ChatSellerLoaded) {
      console.log('‚ö†Ô∏è ChatSeller: D√©j√† charg√©');
      return;
    }
    window.ChatSellerLoaded = true;
    
    // ‚úÖ CHARGEMENT SCRIPT WIDGET
    var script = document.createElement('script');
    script.src = '${ae}/embed.js?v=1.5.1&t=' + Date.now();
    script.async = true;
    script.crossOrigin = 'anonymous';
    script.setAttribute('data-chatseller', 'modern-widget-fixed');
    
    script.onload = function() {
      console.log('‚úÖ ChatSeller: Script charg√© avec message d'accueil');
      
      var maxAttempts = 30;
      var attempts = 0;
      
      function tryInit() {
        attempts++;
        if (window.ChatSeller && typeof window.ChatSeller.init === 'function') {
          try {
            window.ChatSeller.init(window.ChatSellerConfig);
            console.log('‚úÖ ChatSeller: Widget initialis√© avec message d'accueil');
          } catch (error) {
            console.error('‚ùå ChatSeller: Erreur init:', error);
          }
        } else if (attempts < maxAttempts) {
          setTimeout(tryInit, 300);
        } else {
          console.warn('‚è∞ ChatSeller: Timeout init');
        }
      }
      
      tryInit();
    };
    
    script.onerror = function(error) {
      console.error('‚ùå ChatSeller: Erreur chargement:', error);
    };
    
    var firstScript = document.getElementsByTagName('script')[0];
    if (firstScript && firstScript.parentNode) {
      firstScript.parentNode.insertBefore(script, firstScript);
    } else {
      document.head.appendChild(script);
    }
  }
  
  // ‚úÖ D√âMARRAGE INTELLIGENT
  function startWidget() {
    if (window.location.href.includes('/admin/')) {
      console.log('üõë ChatSeller: Admin d√©tect√©, arr√™t');
      return;
    }
    
    loadChatSellerWidget();
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', startWidget);
  } else {
    setTimeout(startWidget, 200);
  }
  
})();
<\/script>
<!-- üöÄ Fin ChatSeller Widget -->`}catch(v){return console.error("‚ùå Erreur g√©n√©ration code int√©gration:",v),"<!-- ‚ùå Erreur lors de la g√©n√©ration du code d'int√©gration. -->"}}),Q=()=>{if(!j.token)throw new Error("Token d'authentification manquant. Veuillez vous reconnecter.");return{Authorization:`Bearer ${j.token}`,"Content-Type":"application/json"}},Pe=async l=>{le.value=!0,z.value=null;try{if(console.log("üîç [useAgentConfig] R√©cup√©ration configuration agent:",l),!l||l==="undefined"||l==="null")throw new Error("ID agent invalide");if(!j.token)throw new Error("Session expir√©e. Veuillez vous reconnecter.");const a=j.user?.id||j.userShopId,[u,m,g]=await Promise.allSettled([$fetch(`/api/v1/agents/${l}/config`,{baseURL:M.public.apiBaseUrl,headers:Q()}),a?$fetch(`/api/v1/shops/${a}`,{baseURL:M.public.apiBaseUrl,headers:Q()}):Promise.resolve(null),$fetch(`/api/v1/agents/${l}/knowledge`,{baseURL:M.public.apiBaseUrl,headers:Q()}).catch(()=>({success:!0,data:[]}))]);if(u.status==="rejected")throw console.error("‚ùå Erreur r√©cup√©ration agent:",u.reason),new Error("Erreur lors de la r√©cup√©ration de l'agent: "+u.reason.message);const c=u.value;if(!c.success)throw new Error(c.error||"Erreur lors de la r√©cup√©ration de la configuration agent");const v=m.status==="fulfilled"?m.value:null,P=g.status==="fulfilled"?g.value:{success:!0,data:[]},h={agent:{id:c.data.agent.id,name:c.data.agent.name,title:c.data.agent.title||O(c.data.agent.type||"general"),type:c.data.agent.type,personality:c.data.agent.personality,productType:c.data.agent.productType||"auto",customProductType:c.data.agent.customProductType||"",shopName:v?.data?.name||c.data.agent.shopName||"cette boutique",description:c.data.agent.description,welcomeMessage:c.data.agent.welcomeMessage,fallbackMessage:c.data.agent.fallbackMessage,avatar:c.data.agent.avatar,isActive:c.data.agent.isActive,config:{...c.data.agent.config,linkedKnowledgeBase:P.data?.map(ne=>ne.id)||[],aiProvider:c.data.agent.config?.aiProvider||"openai",temperature:c.data.agent.config?.temperature||.7,maxTokens:c.data.agent.config?.maxTokens||1e3},stats:{conversations:c.data.agent.totalConversations||0,conversions:c.data.agent.totalConversions||0},knowledgeBase:P.data||[]},widget:{buttonText:v?.data?.widget_config?.buttonText||"Parler √† un conseiller",primaryColor:v?.data?.widget_config?.primaryColor||"#EC4899",position:v?.data?.widget_config?.position||"above-cta",widgetSize:v?.data?.widget_config?.widgetSize||"medium",theme:v?.data?.widget_config?.theme||"modern",borderRadius:v?.data?.widget_config?.borderRadius||"md",animation:v?.data?.widget_config?.animation||"fade",autoOpen:v?.data?.widget_config?.autoOpen||!1,showAvatar:v?.data?.widget_config?.showAvatar!==!1,soundEnabled:v?.data?.widget_config?.soundEnabled!==!1,mobileOptimized:v?.data?.widget_config?.mobileOptimized!==!1,showTypingIndicator:v?.data?.widget_config?.showTypingIndicator!==!1,offlineMessage:v?.data?.widget_config?.offlineMessage,isActive:v?.data?.widget_config?.isActive!==!1,language:v?.data?.widget_config?.language||"fr"},knowledgeBase:P.data||[]};return p.value=h,console.log("‚úÖ [useAgentConfig] Configuration charg√©e:",{agent:h.agent.name,title:h.agent.title,productType:h.agent.productType,customProductType:h.agent.customProductType,shopName:h.agent.shopName,welcomeMessage:!!h.agent.welcomeMessage,widget:h.widget.buttonText}),{success:!0,data:h}}catch(a){console.error("‚ùå [useAgentConfig] Erreur fetchAgentConfig:",a);const u=a.response?.data?.error||a.message||"Erreur lors de la r√©cup√©ration de la configuration";return z.value=u,{success:!1,error:u}}finally{le.value=!1}},pe=async(l,a,u=!1)=>{try{if(console.log("üß™ [testAIMessage] Test coh√©rent avec Widget:",{message:l,agentId:a,isWelcomeTest:u}),!l.trim()&&!u)throw new Error("Message vide");if(!a)throw new Error("Agent ID manquant");const m=()=>A.value?.agent?.productType==="produit"&&A.value?.agent?.customProductType?A.value.agent.customProductType:xe(A.value?.agent?.productType||"auto"),g=await $fetch("/api/v1/public/chat",{method:"POST",baseURL:M.public.apiBaseUrl,headers:{"Content-Type":"application/json"},body:{message:u?"Bonjour":l.trim(),shopId:j.user?.id||j.userShopId||"demo-shop",conversationId:null,productInfo:{name:`Produit de test ${m()}`,price:29900,id:"test-product-123"},visitorId:`test-visitor-${Date.now()}`,isFirstMessage:u}});if(g.success)return{success:!0,message:g.data.message,isWelcome:g.data.isWelcomeMessage||u,provider:g.data.mode==="test"?"openai":g.data.provider||"openai",responseTime:g.data.responseTime||0};throw new Error(g.error||"Erreur lors du test IA")}catch(m){return console.error("‚ùå Erreur test IA:",m),{success:!1,error:m.response?.data?.error||m.message||"Erreur lors du test IA"}}},ye=async(l,a,u=!1)=>{u||(W.value=!0),I.value="syncing",z.value=null;try{if(!j.token)throw new Error("Session expir√©e. Veuillez vous reconnecter.");if(!l)throw new Error("ID agent manquant");const m=j.user?.id||j.userShopId;if(!m)throw new Error("Shop ID manquant");if(console.log("üíæ [saveCompleteConfig] D√©but sauvegarde:",{agentId:l,shopId:m,hasAgentUpdates:!!a.agent,hasWidgetUpdates:!!a.widget,agentTitle:a.agent?.title,productType:a.agent?.productType,customProductType:a.agent?.customProductType,welcomeMessage:!!a.agent?.welcomeMessage,isAutoSave:u}),a.agent){console.log("üíæ Sauvegarde configuration agent avec champs complets...",{title:a.agent.title,productType:a.agent.productType,customProductType:a.agent.customProductType,welcomeMessage:!!a.agent.welcomeMessage,specificInstructions:a.agent.config?.specificInstructions});const g={...a.agent,title:a.agent.title||O(a.agent.type||"general"),productType:a.agent.productType||"auto",customProductType:a.agent.customProductType||"",shopName:a.agent.shopName||"cette boutique",welcomeMessage:a.agent.welcomeMessage||null,config:{...a.agent.config,aiProvider:a.agent.config?.aiProvider||"openai",temperature:a.agent.config?.temperature||.7,maxTokens:a.agent.config?.maxTokens||1e3,specificInstructions:a.agent.config?.specificInstructions||[]}};console.log("üì§ [AGENT SAVE] Payload complet:",{name:g.name,title:g.title,type:g.type,productType:g.productType,customProductType:g.customProductType,welcomeMessage:!!g.welcomeMessage,specificInstructionsCount:g.config.specificInstructions?.length||0});const c=await $fetch(`/api/v1/agents/${l}`,{method:"PUT",baseURL:M.public.apiBaseUrl,headers:Q(),body:g});if(!c.success)throw new Error(`Erreur agent: ${c.error}`);console.log("‚úÖ Agent sauvegard√© avec tous les champs")}if(a.widget){console.log("üé® Sauvegarde configuration widget...",a.widget);const g={widget_config:{buttonText:a.widget.buttonText||"Parler au vendeur",primaryColor:a.widget.primaryColor||"#EC4899",position:a.widget.position||"above-cta",theme:a.widget.theme||"modern",language:a.widget.language||"fr",widgetSize:a.widget.widgetSize||"medium",borderRadius:a.widget.borderRadius||"md",animation:a.widget.animation||"fade",autoOpen:a.widget.autoOpen||!1,showAvatar:a.widget.showAvatar!==!1,soundEnabled:a.widget.soundEnabled!==!1,mobileOptimized:!0,showTypingIndicator:!1,isActive:a.widget.isActive!==!1,offlineMessage:a.widget.offlineMessage||null}};console.log("üì§ [saveCompleteConfig] Payload widget:",g);const c=await $fetch(`/api/v1/shops/${m}`,{method:"PUT",baseURL:M.public.apiBaseUrl,headers:Q(),body:g});if(!c.success)throw console.error("‚ùå Erreur API widget:",c),new Error(`Erreur widget: ${c.error}`);console.log("‚úÖ Widget sauvegard√©:",c.data?.widget_config)}return p.value&&(a.agent&&(p.value.agent={...p.value.agent,...a.agent},!p.value.agent.title&&p.value.agent.type&&(p.value.agent.title=O(p.value.agent.type)),p.value.agent.productType||(p.value.agent.productType="auto"),p.value.agent.shopName||(p.value.agent.shopName="cette boutique"),console.log("‚úÖ Config locale agent mise √† jour")),a.widget&&(p.value.widget={...p.value.widget,...a.widget},console.log("‚úÖ Widget config locale mise √† jour"))),u&&(te.value=new Date,se.value=!1),I.value="synced",console.log("‚úÖ Configuration compl√®te sauvegard√©e et synchronis√©e"),{success:!0,message:u?"Sauvegarde automatique effectu√©e":"Configuration sauvegard√©e avec succ√®s"}}catch(m){console.error("‚ùå [useAgentConfig] Erreur saveCompleteConfig:",m);const g=m.response?.data?.error||m.message||"Erreur lors de la sauvegarde";return z.value=g,I.value="error",{success:!1,error:g}}finally{u||(W.value=!1),setTimeout(()=>{I.value!=="error"&&(I.value="idle")},3e3)}};let me=null;const we=()=>{re.value&&(se.value=!0,me&&clearTimeout(me),me=setTimeout(async()=>{if(se.value&&A.value&&p.value){console.log("üíæ [AUTO-SAVE] D√©clenchement sauvegarde automatique...");try{await ye(p.value.agent.id,{agent:A.value.agent,widget:A.value.widget},!0),console.log("‚úÖ [AUTO-SAVE] Sauvegarde automatique r√©ussie")}catch(l){console.error("‚ùå [AUTO-SAVE] Erreur sauvegarde automatique:",l)}}},12e4))},S=async(l,a)=>{W.value=!0,z.value=null;try{if(console.log("üîó [linkKnowledgeBaseDocuments] Liaison documents:",{agentId:l,documentIds:a}),!l)throw new Error("Agent ID manquant");const u=await $fetch(`/api/v1/agents/${l}/knowledge-base`,{method:"PUT",baseURL:M.public.apiBaseUrl,headers:Q(),body:{documentIds:a}});if(u.success)return p.value&&(p.value.agent.config.linkedKnowledgeBase=a,u.data?.documents&&(p.value.agent.knowledgeBase=u.data.documents,p.value.knowledgeBase=u.data.documents)),console.log("‚úÖ Documents li√©s avec succ√®s"),{success:!0,data:u.data};throw new Error(u.error||"Erreur lors de la liaison des documents")}catch(u){console.error("‚ùå [linkKnowledgeBaseDocuments] Erreur:",u);const m=u.response?.data?.error||u.message||"Erreur lors de la liaison des documents";return z.value=m,{success:!1,error:m}}finally{W.value=!1}},oe=async()=>{try{if(!ge.value)throw new Error("Code d'int√©gration non disponible");return await navigator.clipboard.writeText(ge.value),{success:!0,message:"Code d'int√©gration copi√©!"}}catch(l){return console.error("‚ùå Erreur copie:",l),{success:!1,error:"Impossible de copier le code"}}},D=()=>{z.value=null,I.value==="error"&&(I.value="idle")};return{loading:Z(le),saving:Z(W),error:Z(z),agentConfig:Z(p),localConfig:A,widgetSyncStatus:Z(I),autoSaveEnabled:Z(re),lastAutoSave:Z(te),hasUnsavedChanges:Z(se),isConfigValid:_e,integrationCode:ge,previewWelcomeMessage:ce,getProductTypeOptions:ue,getProductTypeLabel:xe,getTypeLabel:O,getBorderRadiusValue:J,hexToRgb:ie,adjustColor:de,formatTime:Me,getDefaultWelcomeTemplate:Ie,fetchAgentConfig:Pe,saveCompleteConfig:ye,testAIMessage:pe,testWelcomeMessage:Se,linkKnowledgeBaseDocuments:S,copyIntegrationCode:oe,triggerAutoSave:we,clearError:D}},zt={class:"min-h-screen bg-gray-50"},Ut={class:"bg-white shadow-sm border-b border-gray-200"},Dt={class:"px-4 sm:px-6 lg:px-8 py-4 lg:py-6"},Rt={class:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0"},Vt={class:"flex items-center space-x-3 lg:space-x-4 min-w-0 flex-1"},Lt={class:"min-w-0 flex-1"},Nt={class:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 truncate"},Ot={class:"mt-1 text-xs sm:text-sm text-gray-600"},qt={key:0,class:"ml-2 inline-flex items-center text-blue-600"},Ft={key:1,class:"ml-2 inline-flex items-center text-green-600"},Wt={key:2,class:"ml-2 inline-flex items-center text-orange-600"},Ht={key:3,class:"ml-2 inline-flex items-center text-green-600 text-xs"},Gt={class:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3"},Kt={class:"sm:hidden"},Jt=["value"],Yt={class:"hidden sm:flex space-x-1 bg-gray-100 p-1 rounded-lg"},Qt=["onClick"],Xt={class:"hidden lg:inline"},Zt={class:"lg:ml-1"},es={class:"hidden lg:inline text-sm text-gray-500"},ts=["disabled"],ss={key:0,class:"w-4 h-4 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},os={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ns={class:"hidden sm:inline"},as={class:"mx-4 sm:mx-6 lg:mx-8 mt-4 space-y-2"},ls={key:0,class:"p-3 lg:p-4 bg-green-50 border border-green-200 rounded-lg"},rs={class:"flex items-center"},is={class:"text-green-700 text-sm"},ds={key:1,class:"p-3 lg:p-4 bg-red-50 border border-red-200 rounded-lg"},us={class:"flex items-center justify-between"},cs={class:"flex items-center"},gs={class:"text-red-700 text-sm"},ps={key:0,class:"flex items-center justify-center py-12 lg:py-16"},ms={key:1,class:"p-4 sm:p-6 lg:p-8"},vs={key:0,class:"grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8"},fs={class:"xl:col-span-2 space-y-6 lg:space-y-8"},bs={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},xs={class:"space-y-4 lg:space-y-6"},ys={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ws={class:"flex items-center space-x-4"},hs={class:"w-16 h-16 rounded-full overflow-hidden border-2 border-gray-300 bg-gray-100 flex items-center justify-center"},ks=["src","alt"],Cs={key:1,class:"text-gray-400 text-xs text-center"},Ts={class:"flex-1 space-y-3"},As={class:"flex items-center space-x-2"},Es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_s={class:"space-y-3"},Ms=["value"],Is={key:0,class:"space-y-2"},Ss={class:"text-xs text-gray-500"},Ps={class:"block text-sm font-medium text-gray-700 mb-2"},js={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800"},$s={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bs=["disabled"],zs=["disabled"],Us=["disabled"],Ds={key:0,class:"text-xs text-yellow-600 mt-1"},Rs={class:"space-y-4"},Vs={class:"bg-blue-50 p-4 rounded-lg text-sm"},Ls={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Ns=["onClick"],Os={class:"bg-gray-50 p-4 rounded-lg border"},qs=["innerHTML"],Fs={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},Ws={key:0,class:"text-center py-8"},Hs={key:1,class:"space-y-3"},Gs={class:"flex items-center space-x-3"},Ks={class:"text-sm font-medium text-gray-900"},Js={class:"text-xs text-gray-500"},Ys={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},Qs={class:"space-y-4 lg:space-y-6"},Xs={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},Zs={class:"flex items-center"},eo={class:"flex items-center"},to={class:"flex items-center"},so={class:"flex items-center"},oo={class:"space-y-4"},no={class:"flex items-center justify-between p-3 lg:p-4 bg-gray-50 rounded-lg"},ao={class:"flex-1"},lo={class:"flex items-center"},ro={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800"},io={key:0,class:"text-xs text-yellow-600 mt-1"},uo=["disabled"],co={class:"flex items-center justify-between p-3 lg:p-4 bg-gray-50 rounded-lg"},go={class:"flex-1"},po={class:"flex items-center"},mo={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800"},vo={key:0,class:"text-xs text-yellow-600 mt-1"},fo=["disabled"],bo={class:"space-y-2"},xo=["onUpdate:modelValue"],yo=["onClick"],wo={class:"space-y-6"},ho={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},ko={class:"space-y-3 text-sm"},Co={class:"flex justify-between"},To={class:"font-mono bg-gray-100 px-2 py-1 rounded text-xs"},Ao={class:"flex justify-between"},Eo={class:"capitalize"},_o={class:"flex justify-between"},Mo={class:"text-blue-600"},Io={class:"flex justify-between"},So={class:"capitalize"},Po={class:"flex justify-between"},jo={class:"text-blue-600"},$o={class:"flex justify-between"},Bo={class:"flex justify-between"},zo={class:"mt-4 pt-4 border-t border-gray-200"},Uo={class:"flex items-center justify-between"},Do={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},Ro={class:"space-y-3"},Vo={class:"flex justify-between items-center"},Lo={class:"text-lg font-bold text-blue-600"},No={class:"flex justify-between items-center"},Oo={class:"text-lg font-bold text-green-600"},qo={class:"flex justify-between items-center"},Fo={class:"text-lg font-bold text-purple-600"},Wo={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},Ho={class:"space-y-3"},Go={key:1,class:"grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8"},Ko={class:"xl:col-span-2 space-y-6 lg:space-y-8"},Jo={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},Yo={class:"space-y-4 lg:space-y-6"},Qo={class:"flex items-center space-x-3"},Xo={class:"flex space-x-2"},Zo=["onClick","title"],en={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},sn={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},on={class:"space-y-4"},nn={class:"flex items-center justify-between p-3 lg:p-4 bg-gray-50 rounded-lg"},an={class:"flex items-center justify-between p-3 lg:p-4 bg-gray-50 rounded-lg"},ln={class:"flex items-center justify-between p-3 lg:p-4 bg-gray-50 rounded-lg"},rn={class:"flex items-center justify-between p-3 lg:p-4 bg-gray-50 rounded-lg"},dn={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},un={class:"space-y-4"},cn={class:"space-y-6"},gn={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},pn={class:"space-y-4"},mn={class:"bg-gray-100 p-4 rounded-lg"},vn={class:"flex space-x-2"},fn=["title"],bn=["title"],xn=["title"],yn={class:"flex items-center space-x-2 text-xs"},wn={class:"flex items-center"},hn={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},kn={class:"space-y-3 text-sm"},Cn={class:"flex justify-between"},Tn={class:"capitalize"},An={class:"flex justify-between"},En={class:"capitalize"},_n={class:"flex justify-between"},Mn={class:"capitalize"},In={class:"flex justify-between"},Sn={class:"text-blue-600"},Pn={class:"flex justify-between"},jn={class:"mt-4 pt-4 border-t border-gray-200"},$n={class:"flex items-center justify-between"},Bn={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},zn={class:"space-y-3"},Un={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8"},Dn={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-96 lg:h-[600px]"},Rn={class:"flex items-center space-x-3"},Vn={class:"w-8 lg:w-10 h-8 lg:h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center"},Ln={class:"text-xs lg:text-sm font-medium"},Nn={class:"font-medium text-sm lg:text-base"},On={class:"text-xs text-white text-opacity-90 flex items-center"},qn={class:"ml-2 px-2 py-0.5 bg-white bg-opacity-20 rounded text-xs"},Fn={class:"space-y-3 lg:space-y-4"},Wn={key:0,class:"flex items-center"},Hn={class:"text-xs text-gray-500 mr-2"},Gn={key:1},Kn=["innerHTML"],Jn={key:1},Yn={key:2,class:"text-xs opacity-70 mt-1"},Qn={class:"p-3 lg:p-4 border-t border-gray-200 bg-white"},Xn={class:"flex space-x-2"},Zn=["disabled"],ea=["disabled"],ta={key:0,class:"w-3 lg:w-4 h-3 lg:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sa={key:1,class:"w-3 lg:w-4 h-3 lg:h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oa={class:"space-y-6"},na={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},aa={class:"space-y-3 text-sm"},la={class:"flex justify-between"},ra={class:"font-medium capitalize"},ia={class:"flex justify-between"},da={class:"font-medium"},ua={class:"flex justify-between"},ca={class:"font-medium"},ga={class:"flex justify-between"},pa={class:"font-medium text-blue-600"},ma={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},va={class:"space-y-2"},fa=["onClick","disabled"],ba={class:"font-medium"},xa={class:"text-xs text-gray-500"},ya={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6"},wa={class:"space-y-3 text-sm"},ha={class:"flex justify-between"},ka={class:"font-medium"},Ca={class:"flex justify-between"},Ta={class:"font-medium"},Aa={class:"flex justify-between"},Ea={class:"font-medium"},_a={key:3,class:"max-w-4xl mx-auto"},Ma={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8"},Ia={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 lg:mb-8"},Sa={class:"flex"},Pa={class:"ml-3"},ja={class:"mt-2 text-sm text-blue-700"},$a={class:"space-y-6 lg:space-y-8"},Ba={class:"border-l-4 border-blue-500 pl-4 lg:pl-6"},za={class:"relative"},Ua={class:"bg-gray-900 rounded-lg p-3 lg:p-4 overflow-x-auto max-h-80"},Da={class:"text-green-400 text-xs lg:text-sm whitespace-pre-wrap"},Ra={class:"border-l-4 border-green-500 pl-4 lg:pl-6"},Va={class:"flex flex-wrap space-x-1 bg-gray-100 p-1 rounded-lg mb-4"},La=["onClick"],Na={class:"bg-gray-50 rounded-lg p-4"},Oa={key:0},qa={key:1},Fa={key:2},Wa={key:3},Ha={class:"border-l-4 border-purple-500 pl-4 lg:pl-6"},Ga={class:"space-y-3 text-sm text-gray-600"},Ka={class:"list-disc list-inside space-y-1 ml-4"},Ja={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col"},Ya={class:"flex-1 p-6 overflow-y-auto"},Qa={key:0,class:"text-center py-8"},Xa={key:1,class:"text-center py-8"},Za={key:2,class:"space-y-3"},el=["value"],tl={class:"flex-1 min-w-0"},sl={class:"text-sm font-medium text-gray-900 truncate"},ol={class:"text-xs text-gray-500"},nl={class:"flex items-center mt-1 space-x-2"},al={key:0,class:"text-xs text-gray-500"},ll={class:"p-6 border-t border-gray-200"},rl={class:"flex justify-between"},il={class:"text-sm text-gray-600"},dl={class:"flex space-x-3"},ul=["disabled"],cl={key:5,class:"fixed bottom-4 right-4 bg-green-600 text-white px-4 lg:px-6 py-2 lg:py-3 rounded-lg shadow-lg z-50"},gl=At({__name:"agent-config",setup(j){const Ee=Pt(),M=It(),le=We(),W=Ge(),z=He(),{saving:p,error:A,agentConfig:I,isConfigValid:re,integrationCode:te,widgetSyncStatus:se,hasUnsavedChanges:_e,lastAutoSave:ie,getProductTypeOptions:de,getTypeLabel:J,formatTime:Me,fetchAgentConfig:O,saveCompleteConfig:ue,linkKnowledgeBaseDocuments:xe,testAIMessage:Ie,triggerAutoSave:ce,clearError:Se,previewWelcomeMessage:ge,getDefaultWelcomeTemplate:Q,testWelcomeMessage:Pe}=Bt(),pe=b(!1),{documents:ye,loading:me,fetchDocuments:we}=jt(),S=b("agent"),oe=b("shopify"),D=b(null),l=b(!1),a=b(!1),u=b(null),m=b(!1),g=b([]),c=b(!1),v=b(["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#F97316","#84CC16"]),P=b(),h=b(),ne=b(),k=F(()=>le.user?.subscription_plan==="professional"||le.user?.subscription_plan==="enterprise"),s=b({agent:{id:"",name:"",title:"",type:"general",personality:"friendly",productType:"auto",customProductType:"",description:"",welcomeMessage:"",fallbackMessage:"",avatar:"",isActive:!0,config:{collectName:!0,collectPhone:!0,collectEmail:!0,collectAddress:!1,collectPayment:!0,upsellEnabled:!1,urgencyEnabled:!1,specificInstructions:[],linkedKnowledgeBase:[],aiProvider:"openai",temperature:.7,maxTokens:1e3,systemPrompt:"",tone:"friendly"},stats:{conversations:0,conversions:0},knowledgeBase:[]},widget:{buttonText:"Parler √† la vendueuse",primaryColor:"#3B82F6",position:"above-cta",widgetSize:"medium",theme:"modern",borderRadius:"lg",animation:"fade",autoOpen:!1,showAvatar:!0,soundEnabled:!0,mobileOptimized:!0,isActive:!0,language:"fr"}}),H=b(""),U=b([]),Y=b(!1),ae=b([]),je=b([{name:"${agentName}",display:"üë§ Nom vendeur"},{name:"${agentTitle}",display:"üíº Titre vendeur"},{name:"${shopName}",display:"üè™ Nom boutique"},{name:"${productName}",display:"üì¶ Nom produit"},{name:"${productType}",display:"üè∑Ô∏è Type produit"},{name:"${greeting}",display:"üëã Salutation"}]),B=F(()=>{if(M.query.id&&typeof M.query.id=="string")return M.query.id;const o=W.getAgentForConfig();return o?.id?o.id:"unknown"}),$e=F(()=>s.value.agent.name||"Vendeur IA"),ve=F(()=>s.value.agent.knowledgeBase||[]),Re=F(()=>ye.value||[]),Ke=F(()=>ae.value.length===0?0:Math.round(ae.value.reduce((o,t)=>o+t,0)/ae.value.length)),Ve=[{id:"agent",name:"Agent",icon:"ü§ñ"},{id:"widget",name:"Widget",icon:"üé®"},{id:"playground",name:"Test",icon:"üß™"},{id:"integration",name:"Int√©gration",icon:"üîó"}],Je=[{id:"shopify",name:"Shopify",icon:"üü¢"},{id:"wordpress",name:"WordPress",icon:"üîµ"},{id:"woocommerce",name:"WooCommerce",icon:"üü†"},{id:"custom",name:"Personnalis√©",icon:"üåê"}],Ye=[{id:"greeting",title:"üëã Premier contact",description:"Test du message d'accueil",message:"Bonjour"},{id:"product_info",title:"üõçÔ∏è Demande d'information produit",description:"Questions sur un produit",message:"Pouvez-vous me parler de vos produits ?"},{id:"purchase_intent",title:"üí≥ Intention d'achat",description:"Client pr√™t √† acheter",message:"Je voudrais commander ce produit"},{id:"objection",title:"‚ùì Objection prix",description:"Gestion des objections",message:"C'est trop cher pour moi"},{id:"support",title:"üÜò Demande de support",description:"Question technique",message:"J'ai un probl√®me avec ma commande"}],Qe=()=>{W.clearAgentConfig(),Ee.push("/vendeurs-ia")},he=o=>{o(),w()},ke=o=>{u.value=o},Le=F(()=>u.value||A.value),Ne=()=>{u.value=null,Se()},Xe=()=>{P.value&&P.value.click()},Ze=()=>{s.value?.agent&&(s.value.agent.welcomeMessage=Q(),ce())},et=async()=>{if(I.value?.agent.id)try{const o=await Pe(I.value.agent.id);o.success?alert(`Message d'accueil r√©el :

${o.message}`):alert(`Erreur test : ${o.error}`)}catch(o){console.error("Erreur test message d'accueil:",o)}},tt=async()=>{console.log("üîÑ [loadAgentData] D√©but chargement donn√©es agent...");try{pe.value=!0;const o=W.getAgentForConfig();if(o&&W.isDataFresh){console.log("‚úÖ [loadAgentData] Donn√©es r√©cup√©r√©es depuis store:",o.name),s.value.agent={id:o.id,name:o.name,title:o.title||J(o.type||"general"),type:o.type||"general",personality:o.personality||"friendly",productType:o.productType||"auto",customProductType:o.customProductType||"",description:o.description||"",welcomeMessage:o.welcomeMessage||"",fallbackMessage:o.fallbackMessage||"",avatar:o.avatar||"",isActive:o.isActive,config:{collectName:o.config?.collectName??!0,collectPhone:o.config?.collectPhone??!0,collectEmail:o.config?.collectEmail??!0,collectAddress:o.config?.collectAddress??!1,collectPayment:o.config?.collectPayment??!0,upsellEnabled:o.config?.upsellEnabled??!1,urgencyEnabled:o.config?.urgencyEnabled??!1,specificInstructions:o.config?.specificInstructions?[...o.config.specificInstructions]:[],linkedKnowledgeBase:o.config?.linkedKnowledgeBase?[...o.config.linkedKnowledgeBase]:[],aiProvider:o.config?.aiProvider||"openai",temperature:o.config?.temperature||.7,maxTokens:o.config?.maxTokens||1e3,systemPrompt:o.config?.systemPrompt||"",tone:o.config?.tone||"friendly"},stats:o.stats||{conversations:0,conversions:0},knowledgeBase:o.knowledgeBase||[]},a.value=!0,B.value&&B.value!=="unknown"&&(console.log("üîÑ [loadAgentData] Mise √† jour depuis API en arri√®re-plan..."),O(B.value).then(t=>{t.success&&console.log("‚úÖ [loadAgentData] Donn√©es API mises √† jour en arri√®re-plan")}).catch(t=>{console.warn("‚ö†Ô∏è [loadAgentData] Erreur mise √† jour API (non critique):",t)}));return}if(B.value&&B.value!=="unknown"){console.log("üåê [loadAgentData] R√©cup√©ration depuis API pour ID:",B.value);try{const t=await O(B.value);if(t.success){console.log("‚úÖ [loadAgentData] Donn√©es r√©cup√©r√©es depuis API"),a.value=!0;return}else throw new Error(t.error||"Erreur API")}catch(t){throw console.warn("‚ö†Ô∏è [loadAgentData] Erreur API:",t),t}}console.error("‚ùå [loadAgentData] Aucune donn√©e agent disponible"),ke("Impossible de charger les donn√©es de l'agent. Veuillez r√©essayer.")}catch(o){console.error("‚ùå [loadAgentData] Erreur globale:",o),a.value=!1,ke("Erreur lors du chargement des donn√©es de l'agent")}finally{pe.value=!1}},st=o=>o.replace(/([\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])/gu,'<span class="emoji">$1</span>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-900">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic text-gray-700">$1</em>').replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank" class="text-blue-600 underline hover:text-blue-800 transition-colors">$1</a>').replace(/\n\n/g,'<br><br class="my-2">').replace(/\n/g,'<br class="my-1">').replace(/^\- (.*)/gm,'<span class="block ml-2 relative"><span class="absolute -ml-2 text-blue-600">‚Ä¢</span>$1</span>').replace(/(\d+(?:[.,]\d{2})?\s*(?:FCFA|‚Ç¨|USD|\$))/g,'<span class="font-semibold text-green-600 bg-green-50 px-1 rounded">$1</span>'),ot=o=>{s.value.widget.primaryColor=o,q()},Ce=b("idle"),q=()=>{console.log("üé® Widget configuration updated:",s.value.widget),Ce.value!=="syncing"&&(Ce.value="syncing",setTimeout(()=>{Ce.value="synced",setTimeout(()=>{Ce.value="idle"},2e3)},500)),w()},nt=()=>{confirm("√ätes-vous s√ªr de vouloir r√©initialiser la configuration du widget ?")&&(s.value.widget={buttonText:"Parler √† un conseiller",primaryColor:"#3B82F6",position:"above-cta",widgetSize:"medium",theme:"modern",borderRadius:"lg",animation:"fade",autoOpen:!1,showAvatar:!0,soundEnabled:!0,mobileOptimized:!0,isActive:!0,language:"fr"},q(),D.value="‚úÖ Configuration du widget r√©initialis√©e !",setTimeout(()=>{D.value=null},3e3))},at=o=>{const t=h.value;if(t){const n=t.selectionStart,f=t.selectionEnd,C=s.value.agent.welcomeMessage||"";s.value.agent.welcomeMessage=C.substring(0,n)+o+C.substring(f),Fe(()=>{t.focus(),t.selectionStart=t.selectionEnd=n+o.length}),ce()}},lt=async o=>{const n=o.target.files?.[0];if(n){if(!n.type.startsWith("image/")){alert("Veuillez s√©lectionner un fichier image valide.");return}if(n.size>5*1024*1024){alert("L'image doit faire moins de 5MB.");return}try{const f=new FileReader;f.onload=C=>{C.target?.result&&(s.value.agent.avatar=C.target.result,w())},f.readAsDataURL(n),console.log("üìÅ Image s√©lectionn√©e:",n.name)}catch(f){console.error("‚ùå Erreur upload avatar:",f),alert("Erreur lors du t√©l√©chargement de l'image.")}}},rt=()=>{s.value.agent.productType!=="produit"&&(s.value.agent.customProductType=""),w()},it=()=>{if(s.value.agent.name){const o=s.value.agent.title?`${s.value.agent.name} ${s.value.agent.title}`:s.value.agent.name,t=encodeURIComponent(o),n=s.value.widget?.primaryColor?.replace("#","")||"3B82F6";s.value.agent.avatar=`https://ui-avatars.com/api/?name=${t}&background=${n}&color=fff&size=200&rounded=true&font-size=0.4`,w(),console.log("‚úÖ Avatar g√©n√©r√© pour:",o)}},dt=o=>{const t=o.target,n=encodeURIComponent(s.value.agent.name||"Agent"),f=s.value.widget?.primaryColor?.replace("#","")||"6B7280";t.src=`https://ui-avatars.com/api/?name=${n}&background=${f}&color=fff&size=200&rounded=true&font-size=0.4`},ut=o=>({none:"0px",sm:"6px",md:"12px",lg:"16px",full:"50px"})[o]||"12px",ct=o=>({small:"8px 16px",medium:"12px 24px",large:"16px 32px"})[o]||"12px 24px",gt=o=>({small:"13px",medium:"15px",large:"17px"})[o]||"15px",pt=o=>({"above-cta":"Au-dessus du CTA","below-cta":"En-dessous du CTA","beside-cta":"√Ä c√¥t√© du CTA","bottom-right":"Coin bas droite","bottom-left":"Coin bas gauche"})[o]||o,mt=o=>({small:"Petit",medium:"Moyen",large:"Grand"})[o]||o,vt=()=>{if(!k.value){Oe("upsell");return}s.value.agent.config.upsellEnabled=!s.value.agent.config.upsellEnabled,w()},ft=()=>{if(!k.value){Oe("urgency");return}s.value.agent.config.urgencyEnabled=!s.value.agent.config.urgencyEnabled,w()},Oe=o=>{alert(`üîí ${{upsell:"Propositions d'upsell intelligentes",urgency:"Cr√©ation d'urgence (FOMO)"}[o]} est une fonctionnalit√© r√©serv√©e au plan Pro.

Passez au plan Pro pour d√©bloquer toutes les fonctionnalit√©s avanc√©es de ChatSeller.`)},bt=async()=>{m.value=!0,g.value=[...s.value.agent.config.linkedKnowledgeBase||[]],await we()},Te=()=>{m.value=!1,g.value=[]},xt=async()=>{c.value=!0;try{(await xe(B.value,g.value)).success&&(s.value.agent.config.linkedKnowledgeBase=[...g.value],await O(B.value),D.value="‚úÖ Base de connaissances mise √† jour avec succ√®s!",Te(),setTimeout(()=>{D.value=null},3e3))}catch(o){console.error("‚ùå Erreur sauvegarde KB:",o)}finally{c.value=!1}},Be=async()=>{if(!H.value.trim()||Y.value)return;const o=H.value.trim();H.value="",Y.value=!0;const t={id:Date.now().toString(),role:"user",content:o,timestamp:new Date};U.value.push(t);const n={id:(Date.now()+1).toString(),role:"assistant",content:"",timestamp:new Date,loading:!0};U.value.push(n);const f=Date.now();try{console.log("üß™ [TEST AI] D√©but test avec agent:",B.value),console.log("üß™ [TEST AI] Message:",o);const C=await Ie(o,B.value);console.log("üì• [TEST AI] R√©sultat complet:",C);const R=Date.now()-f;if(ae.value.push(R),C.success){const $=U.value.findIndex(G=>G.loading);$!==-1&&(U.value[$]={id:Date.now().toString(),role:"assistant",content:C.message,timestamp:new Date,provider:C.provider||s.value.agent.config.aiProvider||"openai",responseTime:R}),console.log("‚úÖ [TEST AI] Message IA ajout√© avec succ√®s")}else throw new Error(C.error||"Erreur lors du test IA")}catch(C){console.error("‚ùå [TEST AI] Erreur compl√®te:",C);const R=U.value.findIndex($=>$.loading);if(R!==-1){const $=s.value.agent.name||"Assistant",G=s.value.agent.title||"Conseiller";let X="";const Ae=o.toLowerCase();Ae.includes("prix")||Ae.includes("co√ªt")?X=`Merci pour votre question sur les tarifs ! üí∞

Je suis **${$}**, votre ${G}. Je vous mets en relation avec notre √©quipe pour vous donner les informations les plus pr√©cises.

Y a-t-il autre chose que je puisse vous aider ? üòä`:Ae.includes("acheter")||Ae.includes("commander")?X=`Parfait ! Je vais vous aider √† finaliser votre commande. ‚ú®

Pouvez-vous me donner plus de d√©tails sur ce qui vous int√©resse ? üì¶`:X=`Merci pour votre question ! Je suis **${$}**, ${G}.

Je vous mets en relation avec notre √©quipe pour vous donner les meilleures informations.

Y a-t-il autre chose que je puisse vous aider ? üòä`,U.value[R]={id:Date.now().toString(),role:"assistant",content:X,timestamp:new Date,provider:s.value.agent.config.aiProvider||"openai",responseTime:Date.now()-f},console.log("‚ö†Ô∏è [TEST AI] R√©ponse simul√©e utilis√©e avec agent:",$)}}finally{Y.value=!1,await Fe(),Tt()}},yt=o=>{const t={greeting:"Bonjour",product_info:"Pouvez-vous me parler de ce jeu de cartes ?",purchase_intent:"Je voudrais commander ce jeu",objection:"C'est un peu cher pour moi",support:"Comment √ßa fonctionne exactement ?"};H.value=t[o.id]||o.message,Be()},ze=()=>{U.value=[],ae.value=[];const o=s.value.agent.name||I.value?.agent?.name||"Assistant IA",t=s.value.agent.title||I.value?.agent?.title||J(s.value.agent.type||"general"),n=s.value.agent.productType||"auto",f=(R,$)=>{if(R==="produit"&&$)return $;const G=de().find(X=>X.value===R);return G?G.label:"üéØ D√©tection automatique"};console.log("üß™ [PLAYGROUND] Initialisation chat avec:",{name:o,title:t,type:s.value.agent.type,productType:n,hasLocalConfig:!!s.value.agent.name,hasAgentConfig:!!I.value?.agent?.name});let C="";if(s.value.agent.welcomeMessage)C=s.value.agent.welcomeMessage;else{const R=n!=="auto"?`notre ${f(n,s.value.agent.customProductType).toLowerCase().replace(/[üéØüéÆüìöüéìüì±üíªüëóüîßüíéüì¶]/g,"").trim()} de test`:"ce produit de d√©monstration";C=`Bonjour ! üëã Je suis **${o}**, ${t}.

Je vois que vous vous int√©ressez √† ${R}. Excellent choix ! ‚ú®

Comment puis-je vous aider ? üòä

*Note : Ceci est un aper√ßu de test. Sur votre site, je d√©tecterai automatiquement vos vrais produits.*`}U.value.push({id:Date.now().toString(),role:"assistant",content:C,timestamp:new Date,provider:s.value.agent.config.aiProvider||"openai"}),console.log("‚úÖ [PLAYGROUND] Chat initialis√© avec message d'accueil coh√©rent:",C.substring(0,50))},wt=async()=>{(await ue(B.value,{agent:s.value.agent,widget:s.value.widget})).success&&(D.value="‚úÖ Configuration sauvegard√©e et synchronis√©e avec succ√®s !",setTimeout(()=>{D.value=null},3e3))},ht=async()=>{try{if(!te.value)throw new Error("Code d'int√©gration non disponible");await navigator.clipboard.writeText(te.value),l.value=!0,D.value="‚úÖ Code d'int√©gration copi√© dans le presse-papiers !",setTimeout(()=>{l.value=!1,D.value=null},3e3)}catch(o){console.error("‚ùå Erreur copie:",o),ke("Impossible de copier le code d'int√©gration"),setTimeout(()=>{Ne()},3e3)}},qe=o=>({manual:"üìù Manuel",file:"üìÑ Fichier",url:"üîó URL",website:"üåê Site web"})[o]||o,fe=(o,t)=>{const n=o.replace("#",""),f=parseInt(n.substr(0,2),16),C=parseInt(n.substr(2,2),16),R=parseInt(n.substr(4,2),16),$=G=>{const X=G+G*t/100;return Math.max(0,Math.min(255,Math.round(X)))};return`rgb(${$(f)}, ${$(C)}, ${$(R)})`},kt=()=>{s.value.agent.config.specificInstructions||(s.value.agent.config.specificInstructions=[]),s.value.agent.config.specificInstructions.push(""),w()},Ct=o=>{s.value.agent.config.specificInstructions&&(s.value.agent.config.specificInstructions.splice(o,1),w())},w=()=>{console.log("üîÑ [CONFIG CHANGE] Changement d√©tect√©, d√©clenchement auto-save"),ce()},Tt=()=>{const o=ne.value;o&&(o.scrollTop=o.scrollHeight)};return Ue(()=>I.value,o=>{if(o?.agent)try{s.value.agent={id:o.agent.id,name:o.agent.name,title:o.agent.title||J(o.agent.type||"general"),type:o.agent.type||"general",personality:o.agent.personality||"friendly",productType:o.agent.productType||"auto",customProductType:o.agent.customProductType||"",description:o.agent.description||"",welcomeMessage:o.agent.welcomeMessage||"",fallbackMessage:o.agent.fallbackMessage||"",avatar:o.agent.avatar||"",isActive:o.agent.isActive??!0,config:{collectName:o.agent.config?.collectName??!0,collectPhone:o.agent.config?.collectPhone??!0,collectEmail:o.agent.config?.collectEmail??!0,collectAddress:o.agent.config?.collectAddress??!1,collectPayment:o.agent.config?.collectPayment??!0,upsellEnabled:o.agent.config?.upsellEnabled??!1,urgencyEnabled:o.agent.config?.urgencyEnabled??!1,specificInstructions:o.agent.config?.specificInstructions?[...o.agent.config.specificInstructions]:[],linkedKnowledgeBase:o.agent.config?.linkedKnowledgeBase?[...o.agent.config.linkedKnowledgeBase]:[],aiProvider:o.agent.config?.aiProvider||"openai",temperature:o.agent.config?.temperature||.7,maxTokens:o.agent.config?.maxTokens||1e3,systemPrompt:o.agent.config?.systemPrompt||"",tone:o.agent.config?.tone||"friendly"},stats:o.agent.stats||{conversations:0,conversions:0},knowledgeBase:o.agent.knowledgeBase?o.agent.knowledgeBase.map(t=>({id:t.id,title:t.title,contentType:t.contentType,isActive:t.isActive,tags:[...t.tags]})):[]},o.widget&&(s.value.widget={buttonText:o.widget.buttonText||"Parler √† un conseiller",primaryColor:o.widget.primaryColor||"#3B82F6",position:o.widget.position||"above-cta",widgetSize:o.widget.widgetSize||"medium",theme:o.widget.theme||"modern",borderRadius:["none","sm","md","lg","full"].includes(o.widget.borderRadius)?o.widget.borderRadius:"lg",animation:o.widget.animation||"fade",autoOpen:o.widget.autoOpen??!1,showAvatar:o.widget.showAvatar??!0,soundEnabled:o.widget.soundEnabled??!0,mobileOptimized:o.widget.mobileOptimized??!0,isActive:o.widget.isActive??!0,language:o.widget.language||"fr"}),a.value=!0,console.log("‚úÖ [watcher] localConfig mis √† jour avec nouveaux champs")}catch(t){console.error("‚ùå [watcher] Erreur mise √† jour localConfig:",t),ke("Erreur lors de la mise √† jour de la configuration")}},{immediate:!0,deep:!0}),Ue(()=>te.value,(o,t)=>{console.log("üîÑ [WATCH] Code d'int√©gration chang√©:"),console.log('   - Contient "Chargement"?:',o?.includes("Chargement")),console.log("   - Longueur:",o?.length||0),o&&!o.includes("Chargement")&&console.log("‚úÖ [WATCH] Code d'int√©gration pr√™t !")},{immediate:!0}),Ue(()=>s.value,o=>{o&&o.agent&&o.agent.name&&w()},{deep:!0}),Et(async()=>{if(console.log("üîß [DEBUG] Variables d'environnement:"),console.log("  - NODE_ENV:","production"),console.log("  - API URL:",z.public.apiBaseUrl),console.log("  - Widget URL:",z.public.widgetUrl),console.log("  - App URL:",z.public.appUrl),console.log("  - Environment:",z.public.environment),console.log("üöÄ [agent-config] Page mont√©e, chargement config agent..."),M.query.tab&&typeof M.query.tab=="string"){const o=M.query.tab;["agent","widget","playground","integration"].includes(o)&&(S.value=o,console.log(`üéØ Onglet automatique activ√©: ${o}`),o==="playground"&&(ze(),console.log("üß™ Playground initialis√© automatiquement")))}ze(),await tt(),await we()}),St({title:F(()=>`${$e.value} - Configuration - ChatSeller`)}),(o,t)=>(d(),i("div",zt,[e("div",Ut,[e("div",Dt,[e("div",Rt,[e("div",Vt,[e("button",{onClick:Qe,class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors flex-shrink-0"},[...t[37]||(t[37]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("div",Lt,[e("h1",Nt,r($e.value)+" - Configuration ",1),e("p",Ot,[t[41]||(t[41]=T(" Vendeur IA ‚Ä¢ Widget ‚Ä¢ Test ‚Ä¢ Int√©gration ",-1)),_(se)==="syncing"?(d(),i("span",qt,[...t[38]||(t[38]=[e("svg",{class:"w-4 h-4 mr-1 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),T(" Synchronisation... ",-1)])])):_(se)==="synced"?(d(),i("span",Ft,[...t[39]||(t[39]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),T(" Synchronis√© ",-1)])])):E("",!0),_(_e)?(d(),i("span",Wt,[...t[40]||(t[40]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),T(" Sauvegarde dans 2min ",-1)])])):E("",!0),_(ie)?(d(),i("span",Ht," Sauv√© auto: "+r(_(Me)(_(ie))),1)):E("",!0)])])]),e("div",Gt,[e("div",Kt,[y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>S.value=n),class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"},[(d(),i(L,null,N(Ve,n=>e("option",{key:n.id,value:n.id},r(n.icon)+" "+r(n.name),9,Jt)),64))],512),[[V,S.value]])]),e("div",Yt,[(d(),i(L,null,N(Ve,n=>e("button",{key:n.id,onClick:f=>S.value=n.id,class:x(["px-2 lg:px-3 py-1.5 text-xs lg:text-sm font-medium rounded-md transition-colors whitespace-nowrap",S.value===n.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"])},[e("span",Xt,r(n.icon),1),e("span",Zt,r(n.name),1)],10,Qt)),64))]),e("span",es,"ID: "+r(B.value.substring(0,8))+"...",1),e("button",{onClick:wt,disabled:_(p)||!_(re),class:"inline-flex items-center justify-center px-3 lg:px-4 py-2 bg-blue-600 text-white text-xs lg:text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"},[_(p)?(d(),i("svg",ss,[...t[42]||(t[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(d(),i("svg",os,[...t[43]||(t[43]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)])])),e("span",ns,r(_(p)?"Sauvegarde...":"Sauvegarder"),1)],8,ts)])])])]),e("div",as,[D.value?(d(),i("div",ls,[e("div",rs,[t[44]||(t[44]=e("svg",{class:"w-5 h-5 text-green-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("p",is,r(D.value),1)])])):E("",!0),Le.value?(d(),i("div",ds,[e("div",us,[e("div",cs,[t[45]||(t[45]=e("svg",{class:"w-5 h-5 text-red-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",gs,r(Le.value),1)]),e("button",{onClick:Ne,class:"text-red-400 hover:text-red-600"},[...t[46]||(t[46]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):E("",!0)]),pe.value?(d(),i("div",ps,[...t[47]||(t[47]=[e("div",{class:"text-center"},[e("svg",{class:"animate-spin h-6 lg:h-8 w-6 lg:w-8 text-blue-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})]),e("p",{class:"text-gray-600 text-sm lg:text-base"},"Chargement de la configuration...")],-1)])])):_(I)||a.value?(d(),i("div",ms,[S.value==="agent"?(d(),i("div",vs,[e("div",fs,[e("div",bs,[t[66]||(t[66]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4 lg:mb-6"},"ü§ñ Informations du Vendeur IA",-1)),e("div",xs,[e("div",ys,[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du Vendeur IA *",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.agent.name=n),onInput:w,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm lg:text-base",placeholder:"Ex: Sarah, Marc, Lisa, Sophie..."},null,544),[[K,s.value.agent.name]]),t[49]||(t[49]=e("p",{class:"text-xs text-gray-500 mt-1"}," Ce nom appara√Ætra dans les conversations ",-1))]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre/Fonction *",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s.value.agent.title=n),onInput:w,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm lg:text-base",placeholder:"Ex: Conseill√®re produit, Vendeur expert..."},null,544),[[K,s.value.agent.title]]),t[51]||(t[51]=e("p",{class:"text-xs text-gray-500 mt-1"}," Affich√© sous le nom dans le chat ",-1))])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Avatar du Vendeur IA",-1)),e("div",ws,[e("div",hs,[s.value.agent.avatar?(d(),i("img",{key:0,src:s.value.agent.avatar,alt:s.value.agent.name,class:"w-full h-full object-cover",onError:dt},null,40,ks)):(d(),i("div",Cs,r(s.value.agent.name?s.value.agent.name.charAt(0).toUpperCase():"?"),1))]),e("div",Ts,[e("div",null,[y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s.value.agent.avatar=n),onInput:w,type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm",placeholder:"https://example.com/avatar.jpg (optionnel)"},null,544),[[K,s.value.agent.avatar]]),t[52]||(t[52]=e("p",{class:"text-xs text-gray-500 mt-1"}," URL d'image pour l'avatar personnalis√© ",-1))]),e("div",As,[e("input",{ref_key:"avatarUploadRef",ref:P,type:"file",accept:"image/*",onChange:lt,class:"hidden"},null,544),e("button",{onClick:Xe,type:"button",class:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-medium"}," üìÅ Choisir une image "),e("button",{onClick:it,type:"button",class:"px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium"}," üé® G√©n√©rer ")])])])]),e("div",Es,[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de vendeur",-1)),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.value.agent.type=n),onChange:w,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[54]||(t[54]=[e("option",{value:"general"},"üéØ Vendeur g√©n√©raliste",-1),e("option",{value:"product_specialist"},"üõçÔ∏è Sp√©cialiste produit",-1),e("option",{value:"support"},"üÜò Support & SAV",-1),e("option",{value:"upsell"},"üíé Upsell Premium",-1)])],544),[[V,s.value.agent.type]])]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Personnalit√©",-1)),y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>s.value.agent.personality=n),onChange:w,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[56]||(t[56]=[e("option",{value:"professional"},"üíº Professionnel",-1),e("option",{value:"friendly"},"üòä Amical",-1),e("option",{value:"expert"},"üéì Expert technique",-1),e("option",{value:"casual"},"üòé D√©contract√©",-1)])],544),[[V,s.value.agent.personality]])])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[T(" Type de produit propos√© "),e("span",{class:"ml-1 text-xs text-gray-500"},"(pour personnaliser les r√©ponses)")],-1)),e("div",_s,[y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=n=>s.value.agent.productType=n),onChange:rt,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[(d(!0),i(L,null,N(_(de)(),n=>(d(),i("option",{key:n.value,value:n.value},r(n.label),9,Ms))),128))],544),[[V,s.value.agent.productType]]),s.value.agent.productType==="produit"?(d(),i("div",Is,[y(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>s.value.agent.customProductType=n),onInput:w,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Ex: bijou, meuble, cosm√©tique, jeu..."},null,544),[[K,s.value.agent.customProductType]]),t[58]||(t[58]=e("p",{class:"text-xs text-gray-500"},' Sp√©cifiez le type de produit exact (ex: "jeu" au lieu de "produit") ',-1))])):E("",!0),e("p",Ss,r(_(de)().find(n=>n.value===s.value.agent.productType)?.description||"S√©lectionnez le type de produit"),1)])]),e("div",null,[e("label",Ps,[t[60]||(t[60]=T(" Intelligence Artificielle ",-1)),k.value?E("",!0):(d(),i("span",js," Plan Pro "))]),e("div",$s,[e("div",null,[y(e("select",{"onUpdate:modelValue":t[8]||(t[8]=n=>s.value.agent.config.aiProvider=n),disabled:!k.value,onChange:w,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base disabled:bg-gray-100 disabled:text-gray-500"},[t[61]||(t[61]=e("option",{value:"openai"},"ü§ñ GPT-4o-mini (Gratuit)",-1)),e("option",{value:"claude",disabled:!k.value},"üß† Claude Sonnet (Pro)",8,zs)],40,Bs),[[V,s.value.agent.config.aiProvider]])]),e("div",null,[y(e("select",{"onUpdate:modelValue":t[9]||(t[9]=n=>s.value.agent.config.temperature=n),disabled:!k.value,onChange:w,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base disabled:bg-gray-100 disabled:text-gray-500"},[...t[62]||(t[62]=[e("option",{value:.3},"üéØ Pr√©cis (0.3)",-1),e("option",{value:.7},"‚öñÔ∏è √âquilibr√© (0.7)",-1),e("option",{value:1},"üé® Cr√©atif (1.0)",-1)])],40,Us),[[V,s.value.agent.config.temperature]])])]),k.value?E("",!0):(d(),i("p",Ds," üí° Passez au plan Pro pour acc√©der √† Claude Sonnet et aux param√®tres avanc√©s "))]),e("div",Rs,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},[T(" Message d'accueil personnalis√© * "),e("span",{class:"text-gray-500 font-normal ml-2"},"(Avec variables dynamiques)")],-1)),e("div",Vs,[t[63]||(t[63]=e("p",{class:"font-medium text-blue-800 mb-3"},"üîß Variables disponibles :",-1)),e("div",Ls,[(d(!0),i(L,null,N(je.value,n=>(d(),i("button",{key:n.name,onClick:f=>at(n.name),type:"button",class:"px-2 py-1 bg-white text-blue-700 rounded border hover:bg-blue-50 transition-colors text-xs"},r(n.display),9,Ns))),128))]),e("div",{class:"mt-3 flex space-x-2"},[e("button",{onClick:Ze,type:"button",class:"text-xs text-blue-600 hover:text-blue-800 underline"}," üîÑ Template par d√©faut "),e("button",{onClick:et,type:"button",class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," üß™ Tester le message r√©el ")])]),e("div",null,[y(e("textarea",{ref_key:"welcomeMessageInputRef",ref:h,"onUpdate:modelValue":t[10]||(t[10]=n=>s.value.agent.welcomeMessage=n),onInput:w,placeholder:"Tapez votre message d'accueil avec des variables...",class:"w-full p-3 border rounded-lg font-mono text-sm",rows:"4"},null,544),[[K,s.value.agent.welcomeMessage]])]),e("div",Os,[t[64]||(t[64]=e("div",{class:"flex items-center justify-between mb-2"},[e("p",{class:"text-xs font-medium text-gray-600"},"üìã Aper√ßu en temps r√©el :")],-1)),e("div",{class:"text-sm p-3 bg-white rounded border min-h-[60px]",innerHTML:_(ge)||'<em class="text-gray-400">Votre aper√ßu appara√Ætra ici...</em>'},null,8,qs)])])])]),e("div",Fs,[e("div",{class:"flex items-center justify-between mb-4 lg:mb-6"},[t[68]||(t[68]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900"},"üìö Base de Connaissances",-1)),e("button",{onClick:bt,class:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors"},[...t[67]||(t[67]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" G√©rer ",-1)])])]),ve.value.length===0?(d(),i("div",Ws,[...t[69]||(t[69]=[e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-gray-600 text-sm"},"Aucun document li√© √† cet agent",-1),e("p",{class:"text-gray-500 text-xs mt-1"},"Liez des documents pour am√©liorer les r√©ponses de votre agent",-1)])])):(d(),i("div",Hs,[(d(!0),i(L,null,N(ve.value,n=>(d(),i("div",{key:n.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Gs,[t[70]||(t[70]=e("div",{class:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",null,[e("p",Ks,r(n.title),1),e("p",Js,r(qe(n.contentType)),1)])]),e("span",{class:x(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",n.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},r(n.isActive?"Actif":"Inactif"),3)]))),128))]))]),e("div",Ys,[t[82]||(t[82]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4 lg:mb-6"},"üíº Configuration Commerciale",-1)),e("div",Qs,[e("div",null,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Informations √† collecter",-1)),e("div",Xs,[e("label",Zs,[y(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>s.value.agent.config.collectName=n),onInput:w,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[be,s.value.agent.config.collectName]]),t[71]||(t[71]=e("span",{class:"ml-2 text-sm text-gray-700"},"üë§ Nom complet",-1))]),e("label",eo,[y(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>s.value.agent.config.collectPhone=n),onInput:w,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[be,s.value.agent.config.collectPhone]]),t[72]||(t[72]=e("span",{class:"ml-2 text-sm text-gray-700"},"üìû T√©l√©phone",-1))]),e("label",to,[y(e("input",{"onUpdate:modelValue":t[13]||(t[13]=n=>s.value.agent.config.collectEmail=n),onInput:w,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[be,s.value.agent.config.collectEmail]]),t[73]||(t[73]=e("span",{class:"ml-2 text-sm text-gray-700"},"üìß Email",-1))]),e("label",so,[y(e("input",{"onUpdate:modelValue":t[14]||(t[14]=n=>s.value.agent.config.collectAddress=n),onInput:w,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,544),[[be,s.value.agent.config.collectAddress]]),t[74]||(t[74]=e("span",{class:"ml-2 text-sm text-gray-700"},"üè† Adresse",-1))])])]),e("div",oo,[e("div",no,[e("div",ao,[e("div",lo,[t[76]||(t[76]=e("h4",{class:"text-sm font-medium text-gray-900"},"üíé Propositions d'upsell",-1)),k.value?E("",!0):(d(),i("span",ro," Plan Pro "))]),t[77]||(t[77]=e("p",{class:"text-xs text-gray-500 mt-1"},"L'agent propose des produits compl√©mentaires",-1)),k.value?E("",!0):(d(),i("p",io," üí° Fonctionnalit√© avanc√©e r√©serv√©e au plan Pro "))]),e("button",{onClick:vt,disabled:!k.value,class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.agent.config.upsellEnabled&&k.value?"bg-blue-600":"bg-gray-200",k.value?"":"cursor-not-allowed opacity-50"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.agent.config.upsellEnabled&&k.value?"translate-x-5":"translate-x-0"])},null,2)],10,uo)]),e("div",co,[e("div",go,[e("div",po,[t[78]||(t[78]=e("h4",{class:"text-sm font-medium text-gray-900"},"‚ö° Cr√©ation d'urgence (FOMO)",-1)),k.value?E("",!0):(d(),i("span",mo," Plan Pro "))]),t[79]||(t[79]=e("p",{class:"text-xs text-gray-500 mt-1"},"Stock limit√©, offres temporaires",-1)),k.value?E("",!0):(d(),i("p",vo," üí° Fonctionnalit√© avanc√©e r√©serv√©e au plan Pro "))]),e("button",{onClick:ft,disabled:!k.value,class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.agent.config.urgencyEnabled&&k.value?"bg-blue-600":"bg-gray-200",k.value?"":"cursor-not-allowed opacity-50"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.agent.config.urgencyEnabled&&k.value?"translate-x-5":"translate-x-0"])},null,2)],10,fo)])]),e("div",null,[t[81]||(t[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Instructions sp√©cifiques",-1)),e("div",bo,[(d(!0),i(L,null,N(s.value.agent.config.specificInstructions||[],(n,f)=>(d(),i("div",{key:f,class:"flex items-center space-x-2"},[y(e("input",{"onUpdate:modelValue":C=>s.value.agent.config.specificInstructions[f]=C,onInput:w,type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Ex: Toujours demander le pr√©nom du client"},null,40,xo),[[K,s.value.agent.config.specificInstructions[f]]]),e("button",{onClick:C=>Ct(f),type:"button",class:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded",title:"Supprimer cette instruction"},[...t[80]||(t[80]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,yo)]))),128)),e("button",{onClick:kt,type:"button",class:"w-full p-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-300 hover:text-blue-600 transition-colors text-sm"}," + Ajouter une instruction ")])])])])]),e("div",wo,[e("div",ho,[t[91]||(t[91]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"üìä Statut du Vendeur IA",-1)),e("div",ko,[e("div",Co,[t[83]||(t[83]=e("span",{class:"font-medium"},"ID:",-1)),e("span",To,r(B.value.substring(0,8))+"...",1)]),e("div",Ao,[t[84]||(t[84]=e("span",{class:"font-medium"},"Type:",-1)),e("span",Eo,r(_(J)(s.value.agent.type)),1)]),e("div",_o,[t[85]||(t[85]=e("span",{class:"font-medium"},"Titre:",-1)),e("span",Mo,r(s.value.agent.title||_(J)(s.value.agent.type)),1)]),e("div",Io,[t[86]||(t[86]=e("span",{class:"font-medium"},"Fournisseur d'IA:",-1)),e("span",So,r(s.value.agent.config.aiProvider||"OpenAI"),1)]),e("div",Po,[t[87]||(t[87]=e("span",{class:"font-medium"},"Base de connaissances:",-1)),e("span",jo,r(ve.value.length)+" docs",1)]),e("div",$o,[t[88]||(t[88]=e("span",{class:"font-medium"},"Configuration:",-1)),e("span",{class:x(_(re)?"text-green-600":"text-red-600")},r(_(re)?"‚úÖ Valide":"‚ùå Invalide"),3)]),e("div",Bo,[t[89]||(t[89]=e("span",{class:"font-medium"},"Statut:",-1)),e("span",{class:x(s.value.agent.isActive?"text-green-600":"text-red-600")},r(s.value.agent.isActive?"üü¢ Actif":"üî¥ Inactif"),3)])]),e("div",zo,[e("div",Uo,[t[90]||(t[90]=e("span",{class:"text-sm font-medium"},"Vendeur IA actif",-1)),e("button",{onClick:t[15]||(t[15]=n=>{s.value.agent.isActive=!s.value.agent.isActive,w()}),class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.agent.isActive?"bg-blue-600":"bg-gray-200"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.agent.isActive?"translate-x-5":"translate-x-0"])},null,2)],2)])])]),e("div",Do,[t[95]||(t[95]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"üìà Statistiques",-1)),e("div",Ro,[e("div",Vo,[t[92]||(t[92]=e("span",{class:"text-sm text-gray-600"},"Conversations",-1)),e("span",Lo,r(s.value.agent.stats.conversations),1)]),e("div",No,[t[93]||(t[93]=e("span",{class:"text-sm text-gray-600"},"Conversions",-1)),e("span",Oo,r(s.value.agent.stats.conversions),1)]),e("div",qo,[t[94]||(t[94]=e("span",{class:"text-sm text-gray-600"},"Taux de conversion",-1)),e("span",Fo,r(s.value.agent.stats.conversations>0?Math.round(s.value.agent.stats.conversions/s.value.agent.stats.conversations*100):0)+"% ",1)])])]),e("div",Wo,[t[96]||(t[96]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"‚ö° Actions Rapides",-1)),e("div",Ho,[e("button",{onClick:t[16]||(t[16]=n=>S.value="playground"),class:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm lg:text-base"}," üß™ Tester le Vendeur IA "),e("button",{onClick:t[17]||(t[17]=n=>S.value="widget"),class:"w-full px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm lg:text-base"}," üé® Configurer Widget "),e("button",{onClick:t[18]||(t[18]=n=>S.value="integration"),class:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm lg:text-base"}," üîó Code d'Int√©gration ")])])])])):E("",!0),S.value==="widget"?(d(),i("div",Go,[e("div",Ko,[e("div",Jo,[t[107]||(t[107]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4 lg:mb-6"},"üé® Apparence du Widget",-1)),e("div",Yo,[e("div",null,[t[97]||(t[97]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Texte du bouton *",-1)),y(e("input",{"onUpdate:modelValue":t[19]||(t[19]=n=>s.value.widget.buttonText=n),onInput:q,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm lg:text-base",placeholder:"Ex: Parler √† un conseiller"},null,544),[[K,s.value.widget.buttonText]])]),e("div",null,[t[98]||(t[98]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur principale",-1)),e("div",Qo,[y(e("input",{"onUpdate:modelValue":t[20]||(t[20]=n=>s.value.widget.primaryColor=n),onInput:q,type:"color",class:"w-12 h-10 border border-gray-300 rounded-lg cursor-pointer"},null,544),[[K,s.value.widget.primaryColor]]),y(e("input",{"onUpdate:modelValue":t[21]||(t[21]=n=>s.value.widget.primaryColor=n),onInput:q,type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"#3B82F6"},null,544),[[K,s.value.widget.primaryColor]]),e("div",Xo,[(d(!0),i(L,null,N(v.value,n=>(d(),i("button",{key:n,onClick:f=>ot(n),style:ee({backgroundColor:n}),type:"button",class:x(["w-8 h-8 rounded-lg border-2 hover:scale-110 transition-transform",s.value.widget.primaryColor===n?"border-gray-900":"border-gray-300"]),title:n},null,14,Zo))),128))])])]),e("div",en,[e("div",null,[t[100]||(t[100]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Position du widget",-1)),y(e("select",{"onUpdate:modelValue":t[22]||(t[22]=n=>s.value.widget.position=n),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[99]||(t[99]=[De('<option value="above-cta" data-v-4231f6da>Au-dessus du bouton d&#39;achat</option><option value="below-cta" data-v-4231f6da>En-dessous du bouton d&#39;achat</option><option value="beside-cta" data-v-4231f6da>√Ä c√¥t√© du bouton d&#39;achat</option><option value="bottom-right" data-v-4231f6da>Coin en bas √† droite</option><option value="bottom-left" data-v-4231f6da>Coin en bas √† gauche</option>',5)])],544),[[V,s.value.widget.position]])]),e("div",null,[t[102]||(t[102]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Th√®me",-1)),y(e("select",{"onUpdate:modelValue":t[23]||(t[23]=n=>s.value.widget.theme=n),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[101]||(t[101]=[e("option",{value:"modern"},"Moderne",-1),e("option",{value:"minimal"},"Minimaliste",-1),e("option",{value:"brand_adaptive"},"Adaptatif √† la marque",-1)])],544),[[V,s.value.widget.theme]])])]),e("div",tn,[e("div",null,[t[104]||(t[104]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Taille du widget",-1)),y(e("select",{"onUpdate:modelValue":t[24]||(t[24]=n=>s.value.widget.widgetSize=n),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[103]||(t[103]=[e("option",{value:"small"},"Petit",-1),e("option",{value:"medium"},"Moyen",-1),e("option",{value:"large"},"Grand",-1)])],544),[[V,s.value.widget.widgetSize]])]),e("div",null,[t[106]||(t[106]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bordures",-1)),y(e("select",{"onUpdate:modelValue":t[25]||(t[25]=n=>s.value.widget.borderRadius=n),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[105]||(t[105]=[De('<option value="none" data-v-4231f6da>Aucune</option><option value="sm" data-v-4231f6da>L√©g√®res</option><option value="md" data-v-4231f6da>Moyennes</option><option value="lg" data-v-4231f6da>Arrondies</option><option value="full" data-v-4231f6da>Tr√®s arrondies</option>',5)])],544),[[V,s.value.widget.borderRadius]])])])])]),e("div",sn,[t[112]||(t[112]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4 lg:mb-6"},"‚öôÔ∏è Comportement",-1)),e("div",on,[e("div",nn,[t[108]||(t[108]=e("div",{class:"flex-1"},[e("h4",{class:"text-sm font-medium text-gray-900"},"Ouverture automatique"),e("p",{class:"text-xs text-gray-500 mt-1"},"Le chat s'ouvre automatiquement apr√®s quelques secondes")],-1)),e("button",{onClick:t[26]||(t[26]=n=>he(()=>s.value.widget.autoOpen=!s.value.widget.autoOpen)),class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.widget.autoOpen?"bg-blue-600":"bg-gray-200"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.widget.autoOpen?"translate-x-5":"translate-x-0"])},null,2)],2)]),e("div",an,[t[109]||(t[109]=e("div",{class:"flex-1"},[e("h4",{class:"text-sm font-medium text-gray-900"},"Afficher l'avatar"),e("p",{class:"text-xs text-gray-500 mt-1"},"Avatar du Vendeur IA dans les conversations")],-1)),e("button",{onClick:t[27]||(t[27]=n=>he(()=>s.value.widget.showAvatar=!s.value.widget.showAvatar)),class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.widget.showAvatar?"bg-blue-600":"bg-gray-200"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.widget.showAvatar?"translate-x-5":"translate-x-0"])},null,2)],2)]),e("div",ln,[t[110]||(t[110]=e("div",{class:"flex-1"},[e("h4",{class:"text-sm font-medium text-gray-900"},"Sons de notification"),e("p",{class:"text-xs text-gray-500 mt-1"},"Sons pour les nouveaux messages")],-1)),e("button",{onClick:t[28]||(t[28]=n=>he(()=>s.value.widget.soundEnabled=!s.value.widget.soundEnabled)),class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.widget.soundEnabled?"bg-blue-600":"bg-gray-200"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.widget.soundEnabled?"translate-x-5":"translate-x-0"])},null,2)],2)]),e("div",rn,[t[111]||(t[111]=e("div",{class:"flex-1"},[e("h4",{class:"text-sm font-medium text-gray-900"},"Optimisation mobile"),e("p",{class:"text-xs text-gray-500 mt-1"},"Interface adapt√©e aux smartphones")],-1)),e("button",{onClick:t[29]||(t[29]=n=>he(()=>s.value.widget.mobileOptimized=!s.value.widget.mobileOptimized)),class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.widget.mobileOptimized?"bg-blue-600":"bg-gray-200"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.widget.mobileOptimized?"translate-x-5":"translate-x-0"])},null,2)],2)])])]),e("div",dn,[t[117]||(t[117]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4 lg:mb-6"},"üåç Localisation",-1)),e("div",un,[e("div",null,[t[114]||(t[114]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue du widget",-1)),y(e("select",{"onUpdate:modelValue":t[30]||(t[30]=n=>s.value.widget.language=n),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[113]||(t[113]=[e("option",{value:"fr"},"üá´üá∑ Fran√ßais",-1),e("option",{value:"en"},"üá∫üá∏ English",-1),e("option",{value:"wo"},"üá∏üá≥ Wolof",-1)])],544),[[V,s.value.widget.language]])]),e("div",null,[t[116]||(t[116]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Animation d'apparition",-1)),y(e("select",{"onUpdate:modelValue":t[31]||(t[31]=n=>s.value.widget.animation=n),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"},[...t[115]||(t[115]=[e("option",{value:"fade"},"Fondu",-1),e("option",{value:"slide"},"Glissement",-1),e("option",{value:"bounce"},"Rebond",-1),e("option",{value:"none"},"Aucune",-1)])],544),[[V,s.value.widget.animation]])])])])]),e("div",cn,[e("div",gn,[t[125]||(t[125]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"üëÅÔ∏è Pr√©visualisation",-1)),e("div",pn,[e("div",null,[t[119]||(t[119]=e("p",{class:"text-sm text-gray-600 mb-2"},"Bouton sur votre site :",-1)),e("div",mn,[e("button",{style:ee({backgroundColor:s.value.widget.primaryColor,borderRadius:ut(s.value.widget.borderRadius),padding:ct(s.value.widget.widgetSize),fontSize:gt(s.value.widget.widgetSize)}),class:"w-full text-white font-semibold transition-all hover:opacity-90 flex items-center justify-center space-x-2"},[t[118]||(t[118]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-4.906-1.479L3 21l2.521-5.094A8.955 8.955 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})],-1)),e("span",null,r(s.value.widget.buttonText),1)],4)])]),e("div",null,[t[120]||(t[120]=e("p",{class:"text-sm text-gray-600 mb-2"},"Palette de couleurs :",-1)),e("div",vn,[e("div",{class:"w-8 h-8 rounded-lg border border-gray-300",style:ee({backgroundColor:s.value.widget.primaryColor}),title:`Principal: ${s.value.widget.primaryColor}`},null,12,fn),e("div",{class:"w-8 h-8 rounded-lg border border-gray-300",style:ee({backgroundColor:fe(s.value.widget.primaryColor,-20)}),title:`Fonc√©: ${fe(s.value.widget.primaryColor,-20)}`},null,12,bn),e("div",{class:"w-8 h-8 rounded-lg border border-gray-300",style:ee({backgroundColor:fe(s.value.widget.primaryColor,80)}),title:`Clair: ${fe(s.value.widget.primaryColor,80)}`},null,12,xn)])]),e("div",null,[t[124]||(t[124]=e("p",{class:"text-sm text-gray-600 mb-2"},"Responsive :",-1)),e("div",yn,[t[123]||(t[123]=e("div",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 mr-1 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"Desktop")],-1)),e("div",wn,[(d(),i("svg",{class:x(["w-4 h-4 mr-1",s.value.widget.mobileOptimized?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[121]||(t[121]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])],2)),t[122]||(t[122]=e("span",null,"Mobile",-1))])])])])]),e("div",hn,[t[132]||(t[132]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"üîß Informations",-1)),e("div",kn,[e("div",Cn,[t[126]||(t[126]=e("span",{class:"font-medium"},"Th√®me:",-1)),e("span",Tn,r(s.value.widget.theme),1)]),e("div",An,[t[127]||(t[127]=e("span",{class:"font-medium"},"Position:",-1)),e("span",En,r(pt(s.value.widget.position)),1)]),e("div",_n,[t[128]||(t[128]=e("span",{class:"font-medium"},"Taille:",-1)),e("span",Mn,r(mt(s.value.widget.widgetSize)),1)]),e("div",In,[t[129]||(t[129]=e("span",{class:"font-medium"},"Agent li√©:",-1)),e("span",Sn,r(s.value.agent.name),1)]),e("div",Pn,[t[130]||(t[130]=e("span",{class:"font-medium"},"Statut:",-1)),e("span",{class:x(s.value.widget.isActive?"text-green-600":"text-red-600")},r(s.value.widget.isActive?"üü¢ Actif":"üî¥ Inactif"),3)])]),e("div",jn,[e("div",$n,[t[131]||(t[131]=e("span",{class:"text-sm font-medium"},"Widget actif",-1)),e("button",{onClick:t[32]||(t[32]=n=>{s.value.widget.isActive=!s.value.widget.isActive,w()}),class:x(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.value.widget.isActive?"bg-blue-600":"bg-gray-200"])},[e("span",{class:x(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s.value.widget.isActive?"translate-x-5":"translate-x-0"])},null,2)],2)])])]),e("div",Bn,[t[133]||(t[133]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"‚ö° Actions",-1)),e("div",zn,[e("button",{onClick:t[33]||(t[33]=n=>S.value="playground"),class:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm lg:text-base"}," üß™ Tester le Widget "),e("button",{onClick:nt,class:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm lg:text-base"}," üîÑ R√©initialiser "),e("button",{onClick:t[34]||(t[34]=n=>S.value="integration"),class:"w-full px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm lg:text-base"}," üîó Obtenir le code ")])])])])):E("",!0),S.value==="playground"?(d(),i("div",Un,[e("div",Dn,[e("div",{class:"px-4 lg:px-6 py-3 lg:py-4 text-white",style:ee({background:`linear-gradient(135deg, ${s.value.widget.primaryColor} 0%, ${fe(s.value.widget.primaryColor,-20)} 100%)`})},[e("div",Rn,[e("div",Vn,[e("span",Ln,r(s.value.agent.name.charAt(0)),1)]),e("div",null,[e("h4",Nn,r(s.value.agent.name),1),e("p",On,[T(r(s.value.agent.title||_(J)(s.value.agent.type))+" ",1),e("span",qn,r(s.value.agent.config.aiProvider==="claude"?"üß† Claude":"ü§ñ OpenAI"),1)])])])],4),e("div",{class:"flex-1 p-3 lg:p-4 overflow-y-auto bg-gray-50",ref_key:"chatContainerRef",ref:ne},[e("div",Fn,[(d(!0),i(L,null,N(U.value,n=>(d(),i("div",{key:n.id,class:x(["flex items-start space-x-2",n.role==="user"?"flex-row-reverse space-x-reverse":""])},[e("div",{class:x(["w-6 lg:w-8 h-6 lg:h-8 rounded-full flex items-center justify-center text-xs font-medium flex-shrink-0",n.role==="user"?"bg-gray-500 text-white":"text-white"]),style:ee(n.role==="assistant"?{backgroundColor:s.value.widget.primaryColor}:{})},r(n.role==="user"?"V":s.value.agent.name.charAt(0)),7),e("div",{class:x(["max-w-xs p-2 lg:p-3 rounded-lg text-xs lg:text-sm",n.role==="user"?"bg-gray-500 text-white rounded-tr-sm":"bg-white border border-gray-200 rounded-tl-sm"])},[n.loading?(d(),i("div",Wn,[(d(),i("svg",{class:x(["animate-spin h-3 w-3 mr-2",n.role==="user"?"text-white":"text-blue-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[134]||(t[134]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),e("span",Hn,r($e.value)+" est en train d'√©crire...",1)])):(d(),i("div",Gn,[n.role==="assistant"?(d(),i("div",{key:0,class:"message-formatted leading-relaxed",innerHTML:st(n.content)},null,8,Kn)):(d(),i("div",Jn,r(n.content),1)),n.role==="assistant"&&n.provider?(d(),i("div",Yn,r(n.provider==="claude"?"üß†":"ü§ñ")+" "+r(n.responseTime)+"ms ",1)):E("",!0)]))],2)],2))),128))])],512),e("div",Qn,[e("div",Xn,[y(e("input",{"onUpdate:modelValue":t[35]||(t[35]=n=>H.value=n),onKeyup:_t(Be,["enter"]),type:"text",placeholder:"Tapez votre message de test...",class:"flex-1 px-2 lg:px-3 py-1 lg:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs lg:text-sm",disabled:Y.value},null,40,Zn),[[K,H.value]]),e("button",{onClick:Be,disabled:!H.value.trim()||Y.value,class:"px-3 lg:px-4 py-1 lg:py-2 text-white rounded-lg hover:opacity-90 transition-colors disabled:opacity-50 text-xs lg:text-sm",style:ee({backgroundColor:s.value.widget.primaryColor})},[Y.value?(d(),i("svg",sa,[...t[136]||(t[136]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(d(),i("svg",ta,[...t[135]||(t[135]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)])]))],12,ea)])])]),e("div",oa,[e("div",na,[t[141]||(t[141]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"ü§ñ Status IA",-1)),e("div",aa,[e("div",la,[t[137]||(t[137]=e("span",null,"Provider:",-1)),e("span",ra,r(s.value.agent.config.aiProvider==="claude"?"üß† Claude Sonnet":"ü§ñ OpenAI GPT-4o-mini"),1)]),e("div",ia,[t[138]||(t[138]=e("span",null,"Temp√©rature:",-1)),e("span",da,r(s.value.agent.config.temperature||.7),1)]),e("div",ua,[t[139]||(t[139]=e("span",null,"Max Tokens:",-1)),e("span",ca,r(s.value.agent.config.maxTokens||1e3),1)]),e("div",ga,[t[140]||(t[140]=e("span",null,"Base KB:",-1)),e("span",pa,r(ve.value.length)+" docs li√©s",1)])])]),e("div",ma,[t[142]||(t[142]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"üéØ Sc√©narios de Test",-1)),e("div",va,[(d(),i(L,null,N(Ye,n=>e("button",{key:n.id,onClick:f=>yt(n),type:"button",class:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-sm",disabled:Y.value},[e("div",ba,r(n.title),1),e("div",xa,r(n.description),1)],8,fa)),64))])]),e("div",ya,[t[146]||(t[146]=e("h3",{class:"text-base lg:text-lg font-semibold text-gray-900 mb-4"},"üìä Performance Test",-1)),e("div",wa,[e("div",ha,[t[143]||(t[143]=e("span",null,"Messages envoy√©s:",-1)),e("span",ka,r(U.value.filter(n=>n.role==="user").length),1)]),e("div",Ca,[t[144]||(t[144]=e("span",null,"R√©ponses IA:",-1)),e("span",Ta,r(U.value.filter(n=>n.role==="assistant"&&!n.loading).length),1)]),e("div",Aa,[t[145]||(t[145]=e("span",null,"Temps moyen:",-1)),e("span",Ea,r(Ke.value)+"ms",1)])]),e("div",{class:"mt-4"},[e("button",{onClick:ze,type:"button",class:"w-full px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm lg:text-base"}," üîÑ R√©initialiser ")])])])])):E("",!0),S.value==="integration"?(d(),i("div",_a,[e("div",Ma,[t[163]||(t[163]=e("h3",{class:"text-xl lg:text-2xl font-semibold text-gray-900 mb-4 lg:mb-6"},"üîó Guide d'Int√©gration",-1)),e("div",Ia,[e("div",Sa,[t[151]||(t[151]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),e("div",Pa,[t[150]||(t[150]=e("h3",{class:"text-sm font-medium text-blue-800"},"Instructions d'installation",-1)),e("div",ja,[e("p",null,[t[147]||(t[147]=T("Vendeur IA: ",-1)),e("strong",null,r(s.value.agent.name),1),t[148]||(t[148]=T(" ‚Ä¢ Widget: ",-1)),e("strong",null,r(s.value.widget.buttonText),1)]),t[149]||(t[149]=e("p",null,[T("Copiez le code ci-dessous et collez-le juste avant la balise "),e("code",null,"</body>"),T(" de votre site web.")],-1))])])])]),e("div",$a,[e("div",Ba,[t[153]||(t[153]=e("h4",{class:"text-base lg:text-lg font-medium text-gray-900 mb-3"},"1. Code d'int√©gration JavaScript",-1)),e("div",za,[e("div",Ua,[e("pre",Da,[e("code",null,r(_(te)),1)])]),e("button",{onClick:ht,type:"button",class:"absolute top-3 lg:top-4 right-3 lg:right-4 inline-flex items-center px-2 lg:px-3 py-1 border border-gray-600 text-xs font-medium rounded text-gray-300 bg-gray-800 hover:bg-gray-700 transition-colors"},[t[152]||(t[152]=e("svg",{class:"w-3 lg:w-4 h-3 lg:h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),T(" "+r(l.value?"Copi√© !":"Copier"),1)])])]),e("div",Ra,[t[158]||(t[158]=e("h4",{class:"text-base lg:text-lg font-medium text-gray-900 mb-3"},"2. Instructions par plateforme",-1)),e("div",Va,[(d(),i(L,null,N(Je,n=>e("button",{key:n.id,onClick:f=>oe.value=n.id,type:"button",class:x(["px-2 lg:px-3 py-2 text-xs lg:text-sm font-medium rounded-md transition-colors whitespace-nowrap",oe.value===n.id?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},r(n.icon)+" "+r(n.name),11,La)),64))]),e("div",Na,[oe.value==="shopify"?(d(),i("div",Oa,[...t[154]||(t[154]=[e("h5",{class:"font-medium text-gray-900 mb-2"},"üü¢ Shopify",-1),e("ol",{class:"text-sm text-gray-700 space-y-1 list-decimal list-inside"},[e("li",null,"Allez dans votre admin Shopify"),e("li",null,"Th√®me ‚Üí Actions ‚Üí Modifier le code"),e("li",null,[T("Ouvrez le fichier "),e("code",null,"theme.liquid")]),e("li",null,[T("Collez le code juste avant "),e("code",null,"</body>")]),e("li",null,"Sauvegardez et testez")],-1)])])):oe.value==="wordpress"?(d(),i("div",qa,[...t[155]||(t[155]=[e("h5",{class:"font-medium text-gray-900 mb-2"},"üîµ WordPress",-1),e("ol",{class:"text-sm text-gray-700 space-y-1 list-decimal list-inside"},[e("li",null,"Allez dans votre admin WordPress"),e("li",null,"Apparence ‚Üí √âditeur de th√®me"),e("li",null,[T("Ouvrez le fichier "),e("code",null,"footer.php")]),e("li",null,[T("Collez le code juste avant "),e("code",null,"</body>")]),e("li",null,"Mettez √† jour le fichier")],-1)])])):oe.value==="woocommerce"?(d(),i("div",Fa,[...t[156]||(t[156]=[e("h5",{class:"font-medium text-gray-900 mb-2"},"üü† WooCommerce",-1),e("ol",{class:"text-sm text-gray-700 space-y-1 list-decimal list-inside"},[e("li",null,"M√™me processus que WordPress"),e("li",null,'Ou utilisez un plugin comme "Insert Headers and Footers"'),e("li",null,'Collez le code dans la section "Scripts in Footer"'),e("li",null,"Sauvegardez les param√®tres")],-1)])])):(d(),i("div",Wa,[...t[157]||(t[157]=[e("h5",{class:"font-medium text-gray-900 mb-2"},"üåê Site personnalis√©",-1),e("ol",{class:"text-sm text-gray-700 space-y-1 list-decimal list-inside"},[e("li",null,"Ouvrez le fichier HTML de votre page"),e("li",null,[T("Collez le code juste avant "),e("code",null,"</body>")]),e("li",null,"R√©p√©tez pour toutes les pages o√π vous voulez le widget"),e("li",null,"Uploadez les fichiers modifi√©s")],-1)])]))])]),e("div",Ha,[t[161]||(t[161]=e("h4",{class:"text-base lg:text-lg font-medium text-gray-900 mb-3"},"3. Test et validation",-1)),e("div",Ga,[t[160]||(t[160]=e("p",null,[e("strong",null,"‚úÖ V√©rifications √† faire:")],-1)),e("ul",Ka,[e("li",null,'Le bouton "'+r(s.value.widget.buttonText)+'" appara√Æt sur votre page',1),t[159]||(t[159]=e("li",null,"Le chat s'ouvre quand vous cliquez sur le bouton",-1)),e("li",null,`L'agent "`+r(s.value.agent.name)+'" r√©pond √† vos messages',1),e("li",null,"La couleur du widget correspond √† "+r(s.value.widget.primaryColor),1),e("li",null,"Les documents de la base de connaissances sont pris en compte ("+r(ve.value.length)+" docs)",1)])]),t[162]||(t[162]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4"},[e("p",{class:"text-sm text-yellow-800"},[T(" üí° "),e("strong",null,"Astuce:"),T(" Utilisez un navigateur en mode incognito pour tester comme un vrai visiteur. ")])],-1))])]),t[164]||(t[164]=e("div",{class:"mt-6 lg:mt-8 p-4 lg:p-6 bg-blue-50 border border-blue-200 rounded-lg"},[e("h4",{class:"font-medium text-blue-900 mb-2"},"üÜò Besoin d'aide ?"),e("p",{class:"text-sm text-blue-800"},[T(" Notre √©quipe peut vous aider avec l'int√©gration. Contactez-nous √† "),e("a",{href:"mailto:support@chatseller.app",class:"underline font-medium"},"support@chatseller.app")])],-1))])])):E("",!0),m.value?(d(),i("div",{key:4,class:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",onClick:Mt(Te,["self"])},[e("div",Ja,[e("div",{class:"p-6 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[t[166]||(t[166]=e("h3",{class:"text-lg font-semibold text-gray-900"},"üìö G√©rer la Base de Connaissances",-1)),e("button",{onClick:Te,class:"text-gray-400 hover:text-gray-600"},[...t[165]||(t[165]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t[167]||(t[167]=e("p",{class:"text-sm text-gray-600 mt-2"}," S√©lectionnez les documents que votre agent doit utiliser pour r√©pondre aux questions. ",-1))]),e("div",Ya,[_(me)?(d(),i("div",Qa,[...t[168]||(t[168]=[e("svg",{class:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("p",{class:"text-gray-600"},"Chargement des documents...",-1)])])):Re.value.length===0?(d(),i("div",Xa,[...t[169]||(t[169]=[De('<svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4231f6da><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4231f6da></path></svg><p class="text-gray-600 mb-2" data-v-4231f6da>Aucun document disponible</p><p class="text-gray-500 text-sm" data-v-4231f6da><a href="/knowledge-base" class="text-blue-600 hover:text-blue-800 underline" data-v-4231f6da> Cr√©ez d&#39;abord des documents </a> dans votre base de connaissances </p>',3)])])):(d(),i("div",Za,[(d(!0),i(L,null,N(Re.value,n=>(d(),i("div",{key:n.id,class:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50"},[y(e("input",{"onUpdate:modelValue":t[36]||(t[36]=f=>g.value=f),value:n.id,type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,el),[[be,g.value]]),e("div",tl,[e("p",sl,r(n.title),1),e("p",ol,r(qe(n.contentType)),1),e("div",nl,[(d(!0),i(L,null,N(n.tags.slice(0,3),f=>(d(),i("span",{key:f,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"},r(f),1))),128)),n.tags.length>3?(d(),i("span",al,"+"+r(n.tags.length-3),1)):E("",!0)])]),e("span",{class:x(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",n.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},r(n.isActive?"Actif":"Inactif"),3)]))),128))]))]),e("div",ll,[e("div",rl,[e("p",il,r(g.value.length)+" document(s) s√©lectionn√©(s) ",1),e("div",dl,[e("button",{onClick:Te,class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50"}," Annuler "),e("button",{onClick:xt,disabled:c.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50"},r(c.value?"Sauvegarde...":"Sauvegarder"),9,ul)])])])])])):E("",!0),l.value?(d(),i("div",cl,[...t[170]||(t[170]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-4 lg:w-5 h-4 lg:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",{class:"text-sm lg:text-base"},"Code d'int√©gration copi√© !")],-1)])])):E("",!0)])):E("",!0)]))}}),yl=$t(gl,[["__scopeId","data-v-4231f6da"]]);export{yl as default};
