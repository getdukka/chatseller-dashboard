import{d as $,m as H,l as J,I as ae,q as me,E as i,a1 as ee,H as e,U as g,a2 as _,M as A,a3 as L,Q as V,a6 as re,F as N,P as O,a7 as Ie,W as q,a5 as Z,G as l,a0 as oe,a8 as ve,J as je,L as Y,O as pe,T as Xe,N as Ve,a9 as Le,V as Be,u as j}from"./DQgDrh1u.js";import{b as ze,u as qe}from"./Cm96zG12.js";import{_ as Q}from"./DlAUqK2U.js";import{s as De}from"./x_rD_Ya3.js";import"./DAvq3nrc.js";const fe=()=>{const z=ze(),S=$([]),c=$(null),p=$(!1),f=$(!1),v=$(!1),s=$(null),h=H(()=>S.value.length>0),a=async(y={})=>{p.value=!0,s.value=null;try{const u=await z.products.list(y);if(u.success&&u.data)return S.value=u.data,{success:!0,data:u.data};throw new Error(u.error||"Erreur lors du chargement des produits")}catch(u){return s.value=u.message||"Erreur lors du chargement des produits",{success:!1,error:s.value}}finally{p.value=!1}},P=async()=>{p.value=!0,s.value=null;try{if(S.value.length>0){const y=S.value.length,u=S.value.filter(C=>C.is_active).length,x=y-u,M={manual:S.value.filter(C=>C.source==="manual").length,shopify:S.value.filter(C=>C.source==="shopify").length,woocommerce:S.value.filter(C=>C.source==="woocommerce").length},K=S.value.reduce((C,D)=>(D.category&&(C[D.category]=(C[D.category]||0)+1),C),{}),B=Object.entries(K).map(([C,D])=>({name:C,count:D}));c.value={total:y,active:u,inactive:x,bySource:M,categories:B}}else c.value={total:0,active:0,inactive:0,bySource:{manual:0,shopify:0,woocommerce:0},categories:[]};return{success:!0,data:c.value}}catch(y){return s.value=y.message||"Erreur lors du calcul des statistiques",{success:!1,error:s.value}}finally{p.value=!1}},I=async y=>{f.value=!0,s.value=null;try{const u=await z.products.create(y);if(u.success&&u.data)return S.value.unshift(u.data),await P(),{success:!0,data:u.data};throw new Error(u.error||"Erreur lors de la crÃ©ation du produit")}catch(u){return s.value=u.message||"Erreur lors de la crÃ©ation du produit",{success:!1,error:s.value}}finally{f.value=!1}};return{products:S,stats:c,loading:p,saving:f,syncing:v,error:s,hasProducts:h,fetchProducts:a,fetchStats:P,createProduct:I,updateProduct:async(y,u)=>{f.value=!0,s.value=null;try{const x=await z.products.update(y,u);if(x.success&&x.data){const M=S.value.findIndex(K=>K.id===y);return M!==-1&&(S.value[M]=x.data),await P(),{success:!0,data:x.data}}else throw new Error(x.error||"Erreur lors de la modification du produit")}catch(x){return s.value=x.message||"Erreur lors de la modification du produit",{success:!1,error:s.value}}finally{f.value=!1}},deleteProduct:async y=>{f.value=!0,s.value=null;try{const u=await z.products.delete(y);if(u.success)return S.value=S.value.filter(x=>x.id!==y),await P(),{success:!0,message:"Produit supprimÃ©"};throw new Error(u.error||"Erreur lors de la suppression du produit")}catch(u){return s.value=u.message||"Erreur lors de la suppression du produit",{success:!1,error:s.value}}finally{f.value=!1}},duplicateProduct:async y=>{const u=S.value.find(M=>M.id===y);if(!u)return s.value="Produit source non trouvÃ©",{success:!1,error:s.value};const x={name:`${u.name} (Copie)`,description:u.description,price:u.price,compare_at_price:u.compare_at_price,category:u.category,sku:u.sku?`${u.sku}-COPY`:void 0,featured_image:u.featured_image,images:u.images||[],inventory_quantity:u.inventory_quantity,track_inventory:u.track_inventory,is_active:!1};return await I(x)},syncProducts:async(y,u)=>{v.value=!0,s.value=null;try{console.log(`ðŸ”„ Synchronisation ${y} avec:`,u),await new Promise(M=>setTimeout(M,2e3));const x=[{id:`sync-${Date.now()}-1`,name:`Produit ${y} 1`,description:`Produit synchronisÃ© depuis ${y}`,price:29.99,category:"SynchronisÃ©",source:y,featured_image:"https://via.placeholder.com/300x300",images:["https://via.placeholder.com/300x300"],inventory_quantity:100,track_inventory:!0,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:`sync-${Date.now()}-2`,name:`Produit ${y} 2`,description:`Autre produit synchronisÃ© depuis ${y}`,price:49.99,category:"SynchronisÃ©",source:y,featured_image:"https://via.placeholder.com/300x300",images:["https://via.placeholder.com/300x300"],inventory_quantity:50,track_inventory:!0,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];return S.value.push(...x),await P(),{success:!0,message:`${x.length} produits synchronisÃ©s depuis ${y}`,data:x}}catch(x){return s.value=x.message||"Erreur lors de la synchronisation",{success:!1,error:s.value}}finally{v.value=!1}},clearError:()=>{s.value=null},formatPrice:y=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(y),getSourceLabel:y=>({manual:"Manuel",shopify:"Shopify",woocommerce:"WooCommerce"})[y]||y,getSourceBadgeClass:y=>({manual:"bg-purple-100 text-purple-800",shopify:"bg-green-100 text-green-800",woocommerce:"bg-blue-100 text-blue-800"})[y]||"bg-gray-100 text-gray-800"}};function Ke(z,S=300){let c=null;return(...f)=>{c&&clearTimeout(c),c=setTimeout(()=>{z(...f),c=null},S)}}const Ee={class:"modal-content modal-large"},Fe={class:"modal-header"},Te={class:"modal-title"},Re={class:"modal-body max-h-[70vh] overflow-y-auto"},We={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ne={class:"space-y-4"},Oe={key:0,class:"text-red-500 text-xs mt-1"},He={class:"grid grid-cols-2 gap-4"},Je={key:0,class:"text-red-500 text-xs mt-1"},Qe={class:"grid grid-cols-2 gap-4"},Ge=["value"],Ze={class:"space-y-2"},Ye={class:"flex flex-wrap gap-2 mb-2"},et=["onClick"],tt={class:"flex"},st={class:"space-y-4"},ot={key:0,class:"aspect-square bg-gray-100 rounded-lg overflow-hidden relative"},rt=["src"],lt={key:1,class:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-colors"},at={class:"grid grid-cols-3 gap-2"},nt=["src"],it=["onClick"],ut={class:"space-y-2"},dt=["onUpdate:modelValue"],ct=["onClick"],vt={class:"space-y-3"},mt={class:"flex items-center space-x-3"},pt={key:0},ft={class:"space-y-3"},bt={class:"space-y-2"},gt={class:"flex items-center space-x-3"},yt={class:"flex items-center space-x-3"},xt={class:"flex items-center space-x-3"},ht={class:"modal-footer"},kt=["disabled"],wt=J({__name:"ProductFormModal",props:{product:{}},emits:["close","success"],setup(z,{emit:S}){const c=z,p=S,{createProduct:f,updateProduct:v}=fe(),s=$(!1),h=$(""),a=$({name:"",description:"",price:0,compareAtPrice:null,sku:"",category:"",tags:[],features:[""],featuredImage:"",images:[],weight:null,inventoryQuantity:0,trackInventory:!1,isActive:!0,isVisible:!0,availableForSale:!0}),P=$({name:"",price:""}),I=$(),n=$(),b=["Ã‰lectronique","VÃªtements","Maison & Jardin","Sports & Loisirs","BeautÃ© & SantÃ©","Livres","Jouets","Autres"],r=H(()=>a.value.name.trim()!==""&&a.value.price>0&&!P.value.name&&!P.value.price),w=U=>{switch(U){case"name":P.value.name=a.value.name.trim()===""?"Le nom est requis":"";break;case"price":P.value.price=a.value.price<=0?"Le prix doit Ãªtre supÃ©rieur Ã  0":"";break}},te=()=>(w("name"),w("price"),r.value),R=async()=>{if(te()){s.value=!0;try{const U={...a.value,features:a.value.features.filter(d=>d.trim()!==""),tags:a.value.tags.filter(d=>d.trim()!==""),images:a.value.images.filter(d=>d.trim()!==""),compareAtPrice:a.value.compareAtPrice||void 0,weight:a.value.weight||void 0};let t;c.product?t=await v(c.product.id,U):t=await f(U),t.success?(p("success",c.product?"Produit modifiÃ© avec succÃ¨s!":"Produit crÃ©Ã© avec succÃ¨s!"),p("close")):console.error("Product save error:",t.error)}catch(U){console.error("Form submit error:",U)}finally{s.value=!1}}},F=()=>{a.value.features.push("")},W=U=>{a.value.features.splice(U,1)},y=()=>{h.value.trim()!==""&&!a.value.tags.includes(h.value.trim())&&(a.value.tags.push(h.value.trim()),h.value="")},u=U=>{a.value.tags.splice(U,1)},x=()=>{I.value?.click()},M=()=>{n.value?.click()},K=U=>{const t=U.target.files?.[0];if(t){const d=new FileReader;d.onload=X=>{a.value.featuredImage=X.target?.result},d.readAsDataURL(t)}},B=U=>{const t=U.target.files;t&&Array.from(t).forEach(d=>{if(a.value.images.length<5){const X=new FileReader;X.onload=T=>{a.value.images.push(T.target?.result)},X.readAsDataURL(d)}})},C=U=>{a.value.images.splice(U,1)},D=()=>{c.product?a.value={name:c.product.name||"",description:c.product.description||"",price:c.product.price||0,compareAtPrice:c.product.compareAtPrice||null,sku:c.product.sku||"",category:c.product.category||"",tags:[...c.product.tags||[]],features:[...c.product.features||[""]],featuredImage:c.product.featuredImage||"",images:[...c.product.images||[]],weight:c.product.weight||null,inventoryQuantity:c.product.inventoryQuantity||0,trackInventory:c.product.trackInventory||!1,isActive:c.product.isActive!==!1,isVisible:c.product.isVisible!==!1,availableForSale:c.product.availableForSale!==!1}:a.value={name:"",description:"",price:0,compareAtPrice:null,sku:"",category:"",tags:[],features:[""],featuredImage:"",images:[],weight:null,inventoryQuantity:0,trackInventory:!1,isActive:!0,isVisible:!0,availableForSale:!0}};return ae(()=>{D()}),me(()=>c.product,()=>{D()}),(U,t)=>(l(),i("div",{class:"modal-overlay",onClick:t[18]||(t[18]=ee(d=>U.$emit("close"),["self"]))},[e("div",Ee,[e("div",Fe,[e("h3",Te,g(U.product?"Modifier le produit":"Ajouter un produit"),1),e("button",{onClick:t[0]||(t[0]=d=>U.$emit("close")),class:"modal-close"},t[19]||(t[19]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Re,[e("div",We,[e("div",Ne,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom du produit * ",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>a.value.name=d),type:"text",class:V(["input-modern w-full",{"border-red-500":P.value.name}]),placeholder:"Nom de votre produit",onBlur:t[2]||(t[2]=d=>w("name"))},null,34),[[L,a.value.name]]),P.value.name?(l(),i("p",Oe,g(P.value.name),1)):A("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),_(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=d=>a.value.description=d),rows:"4",class:"input-modern w-full",placeholder:"Description dÃ©taillÃ©e de votre produit"},null,512),[[L,a.value.description]])]),e("div",He,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prix (â‚¬) * ",-1)),_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=d=>a.value.price=d),type:"number",step:"0.01",min:"0",class:V(["input-modern w-full",{"border-red-500":P.value.price}]),placeholder:"0.00",onBlur:t[5]||(t[5]=d=>w("price"))},null,34),[[L,a.value.price,void 0,{number:!0}]]),P.value.price?(l(),i("p",Je,g(P.value.price),1)):A("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prix barrÃ© (â‚¬) ",-1)),_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=d=>a.value.compareAtPrice=d),type:"number",step:"0.01",min:"0",class:"input-modern w-full",placeholder:"0.00"},null,512),[[L,a.value.compareAtPrice,void 0,{number:!0}]])])]),e("div",Qe,[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," CatÃ©gorie ",-1)),_(e("select",{"onUpdate:modelValue":t[7]||(t[7]=d=>a.value.category=d),class:"input-modern w-full"},[t[24]||(t[24]=e("option",{value:""},"SÃ©lectionner une catÃ©gorie",-1)),(l(),i(N,null,O(b,d=>e("option",{key:d,value:d},g(d),9,Ge)),64))],512),[[re,a.value.category]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," SKU / RÃ©fÃ©rence ",-1)),_(e("input",{"onUpdate:modelValue":t[8]||(t[8]=d=>a.value.sku=d),type:"text",class:"input-modern w-full",placeholder:"SKU-001"},null,512),[[L,a.value.sku]])])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Poids (grammes) ",-1)),_(e("input",{"onUpdate:modelValue":t[9]||(t[9]=d=>a.value.weight=d),type:"number",min:"0",class:"input-modern w-full",placeholder:"0"},null,512),[[L,a.value.weight,void 0,{number:!0}]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tags ",-1)),e("div",Ze,[e("div",Ye,[(l(!0),i(N,null,O(a.value.tags,(d,X)=>(l(),i("span",{key:X,class:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},[oe(g(d)+" ",1),e("button",{onClick:T=>u(X),class:"ml-1 text-blue-600 hover:text-blue-800"},t[28]||(t[28]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,et)]))),128))]),e("div",tt,[_(e("input",{"onUpdate:modelValue":t[10]||(t[10]=d=>h.value=d),type:"text",class:"input-modern flex-1",placeholder:"Ajouter un tag",onKeyup:Ie(y,["enter"])},null,544),[[L,h.value]]),e("button",{onClick:y,type:"button",class:"ml-2 px-3 py-2 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700"}," Ajouter ")])])])]),e("div",st,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Image principale ",-1)),e("div",{class:"image-upload-zone",onClick:x},[e("input",{ref_key:"imageInput",ref:I,type:"file",accept:"image/*",class:"hidden",onChange:K},null,544),a.value.featuredImage?(l(),i("div",ot,[e("img",{src:a.value.featuredImage,alt:"AperÃ§u",class:"w-full h-full object-cover"},null,8,rt),e("button",{onClick:t[11]||(t[11]=ee(d=>a.value.featuredImage="",["stop"])),class:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600"},t[30]||(t[30]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):(l(),i("div",lt,t[31]||(t[31]=[q('<div class="text-center" data-v-0f4de09b><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0f4de09b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-0f4de09b></path></svg><p class="text-sm text-gray-500 mt-2" data-v-0f4de09b>Cliquer pour ajouter une image</p><p class="text-xs text-gray-400" data-v-0f4de09b>PNG, JPG jusqu&#39;Ã  10MB</p></div>',1)])))])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Images supplÃ©mentaires ",-1)),e("div",at,[(l(!0),i(N,null,O(a.value.images,(d,X)=>(l(),i("div",{key:X,class:"aspect-square bg-gray-100 rounded-lg overflow-hidden relative"},[e("img",{src:d,alt:"Image",class:"w-full h-full object-cover"},null,8,nt),e("button",{onClick:T=>C(X),class:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600"},t[33]||(t[33]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,it)]))),128)),a.value.images.length<5?(l(),i("div",{key:0,onClick:M,class:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-colors"},t[34]||(t[34]=[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]))):A("",!0)]),e("input",{ref_key:"additionalImageInput",ref:n,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:B},null,544)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," CaractÃ©ristiques clÃ©s ",-1)),e("div",ut,[(l(!0),i(N,null,O(a.value.features,(d,X)=>(l(),i("div",{key:X,class:"flex items-center space-x-2"},[_(e("input",{"onUpdate:modelValue":T=>a.value.features[X]=T,type:"text",class:"input-modern flex-1",placeholder:"CaractÃ©ristique"},null,8,dt),[[L,a.value.features[X]]]),e("button",{onClick:T=>W(X),class:"text-red-600 hover:text-red-700"},t[36]||(t[36]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ct)]))),128)),e("button",{onClick:F,type:"button",class:"text-blue-600 hover:text-blue-700 text-sm font-medium"}," + Ajouter une caractÃ©ristique ")])]),e("div",vt,[t[40]||(t[40]=e("h4",{class:"text-sm font-medium text-gray-900"},"Inventaire",-1)),e("div",mt,[_(e("input",{"onUpdate:modelValue":t[12]||(t[12]=d=>a.value.trackInventory=d),type:"checkbox",id:"trackInventory",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Z,a.value.trackInventory]]),t[38]||(t[38]=e("label",{for:"trackInventory",class:"text-sm text-gray-700"}," Suivre la quantitÃ© en stock ",-1))]),a.value.trackInventory?(l(),i("div",pt,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," QuantitÃ© en stock ",-1)),_(e("input",{"onUpdate:modelValue":t[13]||(t[13]=d=>a.value.inventoryQuantity=d),type:"number",min:"0",class:"input-modern w-full",placeholder:"0"},null,512),[[L,a.value.inventoryQuantity,void 0,{number:!0}]])])):A("",!0)]),e("div",ft,[t[44]||(t[44]=e("h4",{class:"text-sm font-medium text-gray-900"},"Statut",-1)),e("div",bt,[e("div",gt,[_(e("input",{"onUpdate:modelValue":t[14]||(t[14]=d=>a.value.isActive=d),type:"checkbox",id:"isActive",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Z,a.value.isActive]]),t[41]||(t[41]=e("label",{for:"isActive",class:"text-sm text-gray-700"}," Produit actif ",-1))]),e("div",yt,[_(e("input",{"onUpdate:modelValue":t[15]||(t[15]=d=>a.value.isVisible=d),type:"checkbox",id:"isVisible",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Z,a.value.isVisible]]),t[42]||(t[42]=e("label",{for:"isVisible",class:"text-sm text-gray-700"}," Visible dans le catalogue ",-1))]),e("div",xt,[_(e("input",{"onUpdate:modelValue":t[16]||(t[16]=d=>a.value.availableForSale=d),type:"checkbox",id:"availableForSale",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Z,a.value.availableForSale]]),t[43]||(t[43]=e("label",{for:"availableForSale",class:"text-sm text-gray-700"}," Disponible Ã  la vente ",-1))])])])])])]),e("div",ht,[e("button",{onClick:t[17]||(t[17]=d=>U.$emit("close")),class:"btn-secondary"}," Annuler "),e("button",{onClick:R,disabled:!r.value||s.value,class:"btn-primary"},g(s.value?"Sauvegarde...":U.product?"Mettre Ã  jour":"CrÃ©er")+" le produit ",9,kt)])])]))}}),Ct=Q(wt,[["__scopeId","data-v-0f4de09b"]]),St={class:"modal-content"},$t={class:"modal-header"},_t={class:"modal-body"},Mt={class:"space-y-4"},Pt=J({__name:"ConnectionModal",emits:["close","connect-shopify","connect-woocommerce"],setup(z,{emit:S}){return(c,p)=>(l(),i("div",{class:"modal-overlay",onClick:p[3]||(p[3]=ee(f=>c.$emit("close"),["self"]))},[e("div",St,[e("div",$t,[p[5]||(p[5]=e("h3",{class:"modal-title"},"Connecter une boutique",-1)),e("button",{onClick:p[0]||(p[0]=f=>c.$emit("close")),class:"modal-close"},p[4]||(p[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",_t,[e("div",Mt,[e("div",{class:"connection-option",onClick:p[1]||(p[1]=f=>c.$emit("connect-shopify"))},p[6]||(p[6]=[q('<div class="flex items-center space-x-4" data-v-7e5717a2><div class="p-3 bg-green-100 rounded-lg" data-v-7e5717a2><svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path d="M15.337 2.543c-.161-.026-.322-.04-.483-.04-2.688 0-4.516 1.859-4.516 4.516 0 .201.013.402.04.603l-3.027 3.027c-.201-.027-.402-.04-.603-.04C3.859 10.609 2 12.468 2 15.337c0 2.868 1.859 4.727 4.748 4.727 2.068 0 3.845-.966 4.395-2.401l3.246-3.246c.966.402 2.068.322 2.951-.241 1.449-.966 1.931-2.951.966-4.4-.563-.859-1.449-1.369-2.388-1.369-.322 0-.643.067-.946.188l-3.528-3.528c.121-.308.188-.629.188-.951 0-.939-.51-1.825-1.369-2.388-.668-.441-1.489-.632-2.294-.441zM15.337 3.71c.51-.081 1.047.081 1.449.402.643.429.859 1.208.644 1.852-.215.644-.859 1.047-1.503.93-.644-.134-1.127-.71-1.208-1.369-.081-.644.215-1.288.618-1.815zm-6.969 7.637c.215-.644.859-1.047 1.503-.93.644.134 1.127.71 1.208 1.369.081.644-.215 1.288-.618 1.815-.51.081-1.047-.081-1.449-.402-.643-.429-.859-1.208-.644-1.852zm-1.503 5.778c-2.147 0-3.888-1.741-3.888-3.888s1.741-3.888 3.888-3.888c.215 0 .429.027.644.067l-.617 2.628c-.027.107-.027.215 0 .322l.617 2.628c-.215.04-.429.067-.644.067z" data-v-7e5717a2></path></svg></div><div class="flex-1" data-v-7e5717a2><h4 class="text-lg font-medium text-gray-900" data-v-7e5717a2>Shopify</h4><p class="text-sm text-gray-500" data-v-7e5717a2> Synchronisez automatiquement votre catalogue Shopify </p><div class="mt-2 flex items-center text-xs text-green-600" data-v-7e5717a2><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-7e5717a2></path></svg> Synchronisation temps rÃ©el </div></div><div class="text-green-600" data-v-7e5717a2><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-7e5717a2></path></svg></div></div>',1)])),e("div",{class:"connection-option",onClick:p[2]||(p[2]=f=>c.$emit("connect-woocommerce"))},p[7]||(p[7]=[q('<div class="flex items-center space-x-4" data-v-7e5717a2><div class="p-3 bg-blue-100 rounded-lg" data-v-7e5717a2><svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path d="M23.527 8.257c-.223-1.37-1.209-2.368-2.587-2.368-1.377 0-2.362.998-2.587 2.368-.033.201-.033.402 0 .603.223 1.37 1.209 2.368 2.587 2.368s2.364-.998 2.587-2.368c.033-.201.033-.402 0-.603zM20.94 7.654c.563 0 1.013.45 1.013 1.013s-.45 1.013-1.013 1.013-1.013-.45-1.013-1.013.45-1.013 1.013-1.013zM8.4 15.6c-.563 0-1.013-.45-1.013-1.013s.45-1.013 1.013-1.013 1.013.45 1.013 1.013-.45 1.013-1.013 1.013zM8.4 12.573c-1.377 0-2.364.998-2.587 2.368-.033.201-.033.402 0 .603.223 1.37 1.209 2.368 2.587 2.368s2.364-.998 2.587-2.368c.033-.201.033-.402 0-.603-.223-1.37-1.209-2.368-2.587-2.368zM14.667 8.16c-.563 0-1.013-.45-1.013-1.013s.45-1.013 1.013-1.013 1.013.45 1.013 1.013-.45 1.013-1.013 1.013zM14.667 5.133c1.377 0 2.364.998 2.587 2.368.033.201.033.402 0 .603-.223 1.37-1.209 2.368-2.587 2.368s-2.364-.998-2.587-2.368c-.033-.201-.033-.402 0-.603.223-1.37 1.209-2.368 2.587-2.368z" data-v-7e5717a2></path></svg></div><div class="flex-1" data-v-7e5717a2><h4 class="text-lg font-medium text-gray-900" data-v-7e5717a2>WooCommerce</h4><p class="text-sm text-gray-500" data-v-7e5717a2> Connectez votre boutique WordPress WooCommerce </p><div class="mt-2 flex items-center text-xs text-blue-600" data-v-7e5717a2><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-7e5717a2></path></svg> API REST sÃ©curisÃ©e </div></div><div class="text-blue-600" data-v-7e5717a2><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-7e5717a2></path></svg></div></div>',1)])),p[8]||(p[8]=q('<div class="connection-option disabled" data-v-7e5717a2><div class="flex items-center space-x-4" data-v-7e5717a2><div class="p-3 bg-gray-100 rounded-lg" data-v-7e5717a2><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" data-v-7e5717a2></path></svg></div><div class="flex-1" data-v-7e5717a2><h4 class="text-lg font-medium text-gray-400" data-v-7e5717a2>Autres plateformes</h4><p class="text-sm text-gray-400" data-v-7e5717a2>Magento, PrestaShop, BigCommerce</p><div class="mt-2" data-v-7e5717a2><span class="text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded" data-v-7e5717a2>BientÃ´t disponible</span></div></div></div></div>',1))]),p[9]||(p[9]=q('<div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4" data-v-7e5717a2><div class="flex" data-v-7e5717a2><svg class="w-5 h-5 text-blue-600 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7e5717a2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-7e5717a2></path></svg><div data-v-7e5717a2><p class="text-sm text-blue-800 font-medium" data-v-7e5717a2>Pourquoi connecter ma boutique ?</p><p class="text-sm text-blue-700 mt-1" data-v-7e5717a2> Synchronisez automatiquement vos produits pour que votre Vendeur IA ait toujours les informations Ã  jour : prix, stock, descriptions et images. </p></div></div></div>',1))])])]))}}),Ut=Q(Pt,[["__scopeId","data-v-7e5717a2"]]),At={class:"modal-content"},It={class:"modal-header"},jt={class:"modal-body"},Xt={class:"space-y-6"},Vt={class:"space-y-3"},Lt={class:"flex items-center"},Bt={class:"flex items-center"},zt={key:0},qt={class:"flex"},Dt={key:0,class:"text-red-500 text-xs mt-1"},Kt={key:1,class:"text-gray-500 text-xs mt-1"},Et={key:1,class:"space-y-4"},Ft={key:0,class:"text-red-500 text-xs mt-1"},Tt={key:0,class:"text-red-500 text-xs mt-1"},Rt={key:0,class:"text-red-500 text-xs mt-1"},Wt={class:"modal-footer"},Nt=["disabled"],Ot=J({__name:"ShopifyConnectionModal",emits:["close","success"],setup(z,{emit:S}){const c=S,p=$(!1),f=$("oauth"),v=$({shopDomain:"",shopUrl:"",apiKey:"",apiPassword:""}),s=$({shopDomain:"",shopUrl:"",apiKey:"",apiPassword:""}),h=H(()=>f.value==="oauth"?v.value.shopDomain.trim()!==""&&!s.value.shopDomain:v.value.shopUrl.trim()!==""&&v.value.apiKey.trim()!==""&&v.value.apiPassword.trim()!==""&&!s.value.shopUrl&&!s.value.apiKey&&!s.value.apiPassword),a=()=>{if(s.value={shopDomain:"",shopUrl:"",apiKey:"",apiPassword:""},f.value==="oauth"){if(!v.value.shopDomain.trim())return s.value.shopDomain="Le nom de boutique est requis",!1;if(!/^[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]$/.test(v.value.shopDomain))return s.value.shopDomain="Format invalide (lettres, chiffres et tirets uniquement)",!1}else{if(!v.value.shopUrl.trim())return s.value.shopUrl="L'URL de la boutique est requise",!1;if(!v.value.shopUrl.includes(".myshopify.com"))return s.value.shopUrl="L'URL doit contenir .myshopify.com",!1;if(!v.value.apiKey.trim())return s.value.apiKey="La clÃ© API est requise",!1;if(!v.value.apiPassword.trim())return s.value.apiPassword="La clÃ© secrÃ¨te est requise",!1}return!0},P=async()=>{if(a()){p.value=!0;try{if(f.value==="oauth"){const I=`https://${v.value.shopDomain}.myshopify.com`;await new Promise(b=>setTimeout(b,2e3));const n={method:"oauth",shopUrl:I,shopDomain:v.value.shopDomain,connectedAt:new Date().toISOString()};localStorage.setItem("shopify_connection",JSON.stringify(n))}else{const I={method:"private",shopUrl:v.value.shopUrl,apiKey:v.value.apiKey,apiPassword:v.value.apiPassword,connectedAt:new Date().toISOString()};await new Promise(n=>setTimeout(n,2e3)),localStorage.setItem("shopify_connection",JSON.stringify({method:"private",shopUrl:I.shopUrl,connectedAt:I.connectedAt}))}c("success"),c("close")}catch(I){console.error("Shopify connection error:",I)}finally{p.value=!1}}};return(I,n)=>(l(),i("div",{class:"modal-overlay",onClick:n[8]||(n[8]=ee(b=>I.$emit("close"),["self"]))},[e("div",At,[e("div",It,[n[10]||(n[10]=q('<div class="flex items-center" data-v-3b96564b><div class="p-2 bg-green-100 rounded-lg mr-3" data-v-3b96564b><svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 24 24" data-v-3b96564b><path d="M15.337 2.543c-.161-.026-.322-.04-.483-.04-2.688 0-4.516 1.859-4.516 4.516 0 .201.013.402.04.603l-3.027 3.027c-.201-.027-.402-.04-.603-.04C3.859 10.609 2 12.468 2 15.337c0 2.868 1.859 4.727 4.748 4.727 2.068 0 3.845-.966 4.395-2.401l3.246-3.246c.966.402 2.068.322 2.951-.241 1.449-.966 1.931-2.951.966-4.4-.563-.859-1.449-1.369-2.388-1.369-.322 0-.643.067-.946.188l-3.528-3.528c.121-.308.188-.629.188-.951 0-.939-.51-1.825-1.369-2.388-.668-.441-1.489-.632-2.294-.441zM15.337 3.71c.51-.081 1.047.081 1.449.402.643.429.859 1.208.644 1.852-.215.644-.859 1.047-1.503.93-.644-.134-1.127-.71-1.208-1.369-.081-.644.215-1.288.618-1.815zm-6.969 7.637c.215-.644.859-1.047 1.503-.93.644.134 1.127.71 1.208 1.369.081.644-.215 1.288-.618 1.815-.51.081-1.047-.081-1.449-.402-.643-.429-.859-1.208-.644-1.852zm-1.503 5.778c-2.147 0-3.888-1.741-3.888-3.888s1.741-3.888 3.888-3.888c.215 0 .429.027.644.067l-.617 2.628c-.027.107-.027.215 0 .322l.617 2.628c-.215.04-.429.067-.644.067z" data-v-3b96564b></path></svg></div><h3 class="modal-title" data-v-3b96564b>Connecter Shopify</h3></div>',1)),e("button",{onClick:n[0]||(n[0]=b=>I.$emit("close")),class:"modal-close"},n[9]||(n[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",jt,[e("div",Xt,[e("div",null,[n[13]||(n[13]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"MÃ©thode de connexion",-1)),e("div",Vt,[e("label",Lt,[_(e("input",{"onUpdate:modelValue":n[1]||(n[1]=b=>f.value=b),type:"radio",value:"oauth",class:"form-radio h-4 w-4 text-green-600"},null,512),[[ve,f.value]]),n[11]||(n[11]=e("span",{class:"ml-3 text-sm"},[e("span",{class:"text-gray-900 font-medium"},"OAuth (RecommandÃ©)"),e("span",{class:"text-gray-500 block"},"Connexion sÃ©curisÃ©e via Shopify")],-1))]),e("label",Bt,[_(e("input",{"onUpdate:modelValue":n[2]||(n[2]=b=>f.value=b),type:"radio",value:"private",class:"form-radio h-4 w-4 text-green-600"},null,512),[[ve,f.value]]),n[12]||(n[12]=e("span",{class:"ml-3 text-sm"},[e("span",{class:"text-gray-900 font-medium"},"App privÃ©e"),e("span",{class:"text-gray-500 block"},"Utiliser une app privÃ©e existante")],-1))])])]),f.value==="oauth"?(l(),i("div",zt,[e("div",null,[n[16]||(n[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," URL de votre boutique Shopify * ",-1)),e("div",qt,[n[14]||(n[14]=e("span",{class:"inline-flex items-center px-3 py-2 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-lg"}," https:// ",-1)),_(e("input",{"onUpdate:modelValue":n[3]||(n[3]=b=>v.value.shopDomain=b),type:"text",placeholder:"votre-boutique",class:V(["flex-1 px-3 py-2 border border-gray-300 rounded-none focus:ring-2 focus:ring-green-500 focus:border-green-500",{"border-red-500":s.value.shopDomain}])},null,2),[[L,v.value.shopDomain]]),n[15]||(n[15]=e("span",{class:"inline-flex items-center px-3 py-2 border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-r-lg"}," .myshopify.com ",-1))]),s.value.shopDomain?(l(),i("p",Dt,g(s.value.shopDomain),1)):(l(),i("p",Kt," Exemple : ma-boutique â†’ https://ma-boutique.myshopify.com "))]),n[17]||(n[17]=q('<div class="bg-green-50 border border-green-200 rounded-lg p-4" data-v-3b96564b><div class="flex" data-v-3b96564b><svg class="w-5 h-5 text-green-600 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3b96564b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3b96564b></path></svg><div data-v-3b96564b><p class="text-sm text-green-800 font-medium" data-v-3b96564b>Connexion sÃ©curisÃ©e</p><p class="text-sm text-green-700 mt-1" data-v-3b96564b> Vous serez redirigÃ© vers Shopify pour autoriser l&#39;accÃ¨s. Aucun mot de passe requis. </p></div></div></div>',1))])):A("",!0),f.value==="private"?(l(),i("div",Et,[e("div",null,[n[18]||(n[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," URL de votre boutique Shopify * ",-1)),_(e("input",{"onUpdate:modelValue":n[4]||(n[4]=b=>v.value.shopUrl=b),type:"url",placeholder:"https://votre-boutique.myshopify.com",class:V(["input-modern w-full",{"border-red-500":s.value.shopUrl}])},null,2),[[L,v.value.shopUrl]]),s.value.shopUrl?(l(),i("p",Ft,g(s.value.shopUrl),1)):A("",!0)]),e("div",null,[n[19]||(n[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," API Key * ",-1)),_(e("input",{"onUpdate:modelValue":n[5]||(n[5]=b=>v.value.apiKey=b),type:"text",placeholder:"Votre clÃ© API Shopify",class:V(["input-modern w-full",{"border-red-500":s.value.apiKey}])},null,2),[[L,v.value.apiKey]]),s.value.apiKey?(l(),i("p",Tt,g(s.value.apiKey),1)):A("",!0)]),e("div",null,[n[20]||(n[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," API Secret Key * ",-1)),_(e("input",{"onUpdate:modelValue":n[6]||(n[6]=b=>v.value.apiPassword=b),type:"password",placeholder:"Votre clÃ© secrÃ¨te API",class:V(["input-modern w-full",{"border-red-500":s.value.apiPassword}])},null,2),[[L,v.value.apiPassword]]),s.value.apiPassword?(l(),i("p",Rt,g(s.value.apiPassword),1)):A("",!0)]),n[21]||(n[21]=q('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4" data-v-3b96564b><div class="flex" data-v-3b96564b><svg class="w-5 h-5 text-blue-600 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3b96564b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3b96564b></path></svg><div data-v-3b96564b><p class="text-sm text-blue-800 font-medium" data-v-3b96564b>Comment crÃ©er une app privÃ©e ?</p><ol class="text-sm text-blue-700 mt-2 space-y-1 list-decimal list-inside" data-v-3b96564b><li data-v-3b96564b>Admin Shopify â†’ Apps â†’ DÃ©velopper des apps</li><li data-v-3b96564b>CrÃ©er une app â†’ App privÃ©e personnalisÃ©e</li><li data-v-3b96564b>Configuration â†’ Admin API â†’ SÃ©lectionner les permissions : Products (read), Inventory (read)</li><li data-v-3b96564b>Installer l&#39;app et rÃ©cupÃ©rer les clÃ©s API</li></ol></div></div></div>',1))])):A("",!0),n[22]||(n[22]=q('<div class="bg-gray-50 border border-gray-200 rounded-lg p-4" data-v-3b96564b><h5 class="text-sm font-medium text-gray-900 mb-2" data-v-3b96564b>Permissions demandÃ©es :</h5><ul class="text-sm text-gray-700 space-y-1" data-v-3b96564b><li class="flex items-center" data-v-3b96564b><svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3b96564b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-3b96564b></path></svg> Lecture des produits et collections </li><li class="flex items-center" data-v-3b96564b><svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3b96564b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-3b96564b></path></svg> Lecture de l&#39;inventaire et des prix </li><li class="flex items-center" data-v-3b96564b><svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3b96564b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-3b96564b></path></svg> AccÃ¨s aux images et descriptions </li></ul></div>',1))])]),e("div",Wt,[e("button",{onClick:n[7]||(n[7]=b=>I.$emit("close")),class:"btn-secondary"}," Annuler "),e("button",{onClick:P,disabled:!h.value||p.value,class:"btn-primary btn-green"},g(p.value?"Connexion...":"Connecter Shopify"),9,Nt)])])]))}}),Ht=Q(Ot,[["__scopeId","data-v-3b96564b"]]),Jt={class:"modal-content"},Qt={class:"modal-header"},Gt={class:"modal-body"},Zt={class:"space-y-6"},Yt={key:0,class:"text-red-500 text-xs mt-1"},es={key:1,class:"text-gray-500 text-xs mt-1"},ts={key:0,class:"text-red-500 text-xs mt-1"},ss={key:1,class:"text-gray-500 text-xs mt-1"},os={key:0,class:"text-red-500 text-xs mt-1"},rs={key:1,class:"text-gray-500 text-xs mt-1"},ls={class:"flex items-center space-x-3"},as={class:"flex"},ns={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},is={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},us={class:"modal-footer"},ds=["disabled"],cs=["disabled"],vs=J({__name:"WooCommerceConnectionModal",emits:["close","success"],setup(z,{emit:S}){const c=S,p=$(!1),f=$(!1),v=$(null),s=$({siteUrl:"",consumerKey:"",consumerSecret:"",apiVersion:"wc/v3",forceSsl:!0}),h=$({siteUrl:"",consumerKey:"",consumerSecret:""}),a=H(()=>s.value.siteUrl.trim()!==""&&s.value.consumerKey.trim()!==""&&s.value.consumerSecret.trim()!==""&&!h.value.siteUrl&&!h.value.consumerKey&&!h.value.consumerSecret),P=()=>{if(h.value={siteUrl:"",consumerKey:"",consumerSecret:""},!s.value.siteUrl.trim())return h.value.siteUrl="L'URL du site est requise",!1;try{new URL(s.value.siteUrl)}catch{return h.value.siteUrl="URL invalide",!1}return s.value.consumerKey.trim()?s.value.consumerKey.startsWith("ck_")?s.value.consumerKey.length!==43?(h.value.consumerKey="Format invalide (doit faire 43 caractÃ¨res)",!1):s.value.consumerSecret.trim()?s.value.consumerSecret.startsWith("cs_")?s.value.consumerSecret.length!==43?(h.value.consumerSecret="Format invalide (doit faire 43 caractÃ¨res)",!1):!0:(h.value.consumerSecret='La Consumer Secret doit commencer par "cs_"',!1):(h.value.consumerSecret="La Consumer Secret est requise",!1):(h.value.consumerKey='La Consumer Key doit commencer par "ck_"',!1):(h.value.consumerKey="La Consumer Key est requise",!1)},I=async()=>{if(P()){f.value=!0,v.value=null;try{await new Promise(r=>setTimeout(r,2e3)),Math.random()>.3?v.value={success:!0,message:"Connexion Ã©tablie avec succÃ¨s! WooCommerce dÃ©tectÃ©."}:v.value={success:!1,message:"Impossible de se connecter. VÃ©rifiez vos paramÃ¨tres."}}catch(b){v.value={success:!1,message:b.message||"Erreur lors du test de connexion"}}finally{f.value=!1}}},n=async()=>{if(P()){p.value=!0;try{const b={siteUrl:s.value.siteUrl,consumerKey:s.value.consumerKey,consumerSecret:s.value.consumerSecret,apiVersion:s.value.apiVersion,forceSsl:s.value.forceSsl,connectedAt:new Date().toISOString()};await new Promise(r=>setTimeout(r,2e3)),localStorage.setItem("woocommerce_connection",JSON.stringify({siteUrl:b.siteUrl,apiVersion:b.apiVersion,forceSsl:b.forceSsl,connectedAt:b.connectedAt})),c("success"),c("close")}catch(b){console.error("WooCommerce connection error:",b),v.value={success:!1,message:b.message||"Erreur lors de la connexion"}}finally{p.value=!1}}};return(b,r)=>(l(),i("div",{class:"modal-overlay",onClick:r[7]||(r[7]=ee(w=>b.$emit("close"),["self"]))},[e("div",Jt,[e("div",Qt,[r[9]||(r[9]=q('<div class="flex items-center" data-v-80bfb06d><div class="p-2 bg-blue-100 rounded-lg mr-3" data-v-80bfb06d><svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 24 24" data-v-80bfb06d><path d="M23.527 8.257c-.223-1.37-1.209-2.368-2.587-2.368-1.377 0-2.362.998-2.587 2.368-.033.201-.033.402 0 .603.223 1.37 1.209 2.368 2.587 2.368s2.364-.998 2.587-2.368c.033-.201.033-.402 0-.603zM20.94 7.654c.563 0 1.013.45 1.013 1.013s-.45 1.013-1.013 1.013-1.013-.45-1.013-1.013.45-1.013 1.013-1.013zM8.4 15.6c-.563 0-1.013-.45-1.013-1.013s.45-1.013 1.013-1.013 1.013.45 1.013 1.013-.45 1.013-1.013 1.013zM8.4 12.573c-1.377 0-2.364.998-2.587 2.368-.033.201-.033.402 0 .603.223 1.37 1.209 2.368 2.587 2.368s2.364-.998 2.587-2.368c.033-.201-.033-.402 0-.603-.223-1.37-1.209-2.368-2.587-2.368zM14.667 8.16c-.563 0-1.013-.45-1.013-1.013s.45-1.013 1.013-1.013 1.013.45 1.013 1.013-.45 1.013-1.013 1.013zM14.667 5.133c1.377 0 2.364.998 2.587 2.368.033.201.033.402 0 .603-.223 1.37-1.209 2.368-2.587 2.368s-2.364-.998-2.587-2.368c-.033-.201-.033-.402 0-.603.223-1.37 1.209-2.368 2.587-2.368z" data-v-80bfb06d></path></svg></div><h3 class="modal-title" data-v-80bfb06d>Connecter WooCommerce</h3></div>',1)),e("button",{onClick:r[0]||(r[0]=w=>b.$emit("close")),class:"modal-close"},r[8]||(r[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Gt,[e("div",Zt,[e("div",null,[r[10]||(r[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," URL de votre site WordPress * ",-1)),_(e("input",{"onUpdate:modelValue":r[1]||(r[1]=w=>s.value.siteUrl=w),type:"url",placeholder:"https://votre-site.com",class:V(["input-modern w-full",{"border-red-500":h.value.siteUrl}])},null,2),[[L,s.value.siteUrl]]),h.value.siteUrl?(l(),i("p",Yt,g(h.value.siteUrl),1)):(l(),i("p",es," L'URL complÃ¨te de votre site WordPress avec WooCommerce "))]),e("div",null,[r[11]||(r[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Consumer Key * ",-1)),_(e("input",{"onUpdate:modelValue":r[2]||(r[2]=w=>s.value.consumerKey=w),type:"text",placeholder:"ck_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",class:V(["input-modern w-full",{"border-red-500":h.value.consumerKey}])},null,2),[[L,s.value.consumerKey]]),h.value.consumerKey?(l(),i("p",ts,g(h.value.consumerKey),1)):(l(),i("p",ss,' Commence par "ck_" suivi de 40 caractÃ¨res '))]),e("div",null,[r[12]||(r[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Consumer Secret * ",-1)),_(e("input",{"onUpdate:modelValue":r[3]||(r[3]=w=>s.value.consumerSecret=w),type:"password",placeholder:"cs_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",class:V(["input-modern w-full",{"border-red-500":h.value.consumerSecret}])},null,2),[[L,s.value.consumerSecret]]),h.value.consumerSecret?(l(),i("p",os,g(h.value.consumerSecret),1)):(l(),i("p",rs,' Commence par "cs_" suivi de 40 caractÃ¨res '))]),e("div",null,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Version API WooCommerce ",-1)),_(e("select",{"onUpdate:modelValue":r[4]||(r[4]=w=>s.value.apiVersion=w),class:"input-modern w-full"},r[13]||(r[13]=[e("option",{value:"wc/v3"},"v3 (RecommandÃ©)",-1),e("option",{value:"wc/v2"},"v2",-1),e("option",{value:"wc/v1"},"v1",-1)]),512),[[re,s.value.apiVersion]]),r[15]||(r[15]=e("p",{class:"text-gray-500 text-xs mt-1"}," La version 3 est recommandÃ©e pour les sites WooCommerce rÃ©cents ",-1))]),e("div",ls,[_(e("input",{"onUpdate:modelValue":r[5]||(r[5]=w=>s.value.forceSsl=w),type:"checkbox",id:"forceSsl",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Z,s.value.forceSsl]]),r[16]||(r[16]=e("label",{for:"forceSsl",class:"text-sm text-gray-700"}," Forcer HTTPS (recommandÃ© si votre site utilise SSL) ",-1))]),r[17]||(r[17]=q('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4" data-v-80bfb06d><div class="flex" data-v-80bfb06d><svg class="w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-80bfb06d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-80bfb06d></path></svg><div data-v-80bfb06d><p class="text-sm text-blue-800 font-medium" data-v-80bfb06d>Comment obtenir vos clÃ©s API ?</p><ol class="text-sm text-blue-700 mt-2 space-y-1 list-decimal list-inside" data-v-80bfb06d><li data-v-80bfb06d>Connectez-vous Ã  votre admin WordPress</li><li data-v-80bfb06d>WooCommerce â†’ RÃ©glages â†’ AvancÃ© â†’ REST API</li><li data-v-80bfb06d>Cliquez sur &quot;Ajouter une clÃ©&quot;</li><li data-v-80bfb06d><strong data-v-80bfb06d>Description :</strong> ChatSeller Integration </li><li data-v-80bfb06d><strong data-v-80bfb06d>Utilisateur :</strong> Choisissez un admin </li><li data-v-80bfb06d><strong data-v-80bfb06d>Permissions :</strong> Lecture </li><li data-v-80bfb06d>GÃ©nÃ©rez les clÃ©s et copiez-les ici</li></ol></div></div></div>',1)),v.value?(l(),i("div",{key:0,class:V([v.value.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200","border rounded-lg p-4"])},[e("div",as,[(l(),i("svg",{class:V([v.value.success?"text-green-600":"text-red-600","w-5 h-5 mr-2 mt-0.5"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v.value.success?(l(),i("path",ns)):(l(),i("path",is))],2)),e("div",null,[e("p",{class:V([v.value.success?"text-green-800":"text-red-800","text-sm font-medium"])},g(v.value.success?"Connexion rÃ©ussie!":"Erreur de connexion"),3),e("p",{class:V([v.value.success?"text-green-700":"text-red-700","text-sm mt-1"])},g(v.value.message),3)])])],2)):A("",!0),r[18]||(r[18]=q('<div class="bg-gray-50 border border-gray-200 rounded-lg p-4" data-v-80bfb06d><h5 class="text-sm font-medium text-gray-900 mb-2" data-v-80bfb06d>Permissions demandÃ©es :</h5><ul class="text-sm text-gray-700 space-y-1" data-v-80bfb06d><li class="flex items-center" data-v-80bfb06d><svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-80bfb06d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-80bfb06d></path></svg> Lecture des produits et catÃ©gories </li><li class="flex items-center" data-v-80bfb06d><svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-80bfb06d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-80bfb06d></path></svg> Lecture des stocks et prix </li><li class="flex items-center" data-v-80bfb06d><svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-80bfb06d><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-80bfb06d></path></svg> AccÃ¨s aux images et attributs </li></ul></div>',1))])]),e("div",us,[e("button",{onClick:r[6]||(r[6]=w=>b.$emit("close")),class:"btn-secondary"}," Annuler "),e("button",{onClick:I,disabled:!a.value||f.value,class:"btn-secondary mr-2"},g(f.value?"Test...":"Tester"),9,ds),e("button",{onClick:n,disabled:!a.value||p.value||v.value&&!v.value.success,class:"btn-primary btn-blue"},g(p.value?"Connexion...":"Connecter WooCommerce"),9,cs)])])]))}}),ms=Q(vs,[["__scopeId","data-v-80bfb06d"]]),ps={key:0,class:"fixed bottom-4 right-4 max-w-sm w-full bg-white rounded-lg shadow-lg border border-gray-200 z-50",role:"alert"},fs={class:"p-4"},bs={class:"flex items-start"},gs={class:"flex-shrink-0"},ys={key:0,class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xs={key:1,class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},hs={key:2,class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ks={key:3,class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ws={class:"ml-3 w-0 flex-1"},Cs={key:0,class:"mt-1 text-sm text-gray-500"},Ss={key:0,class:"mt-3 w-full bg-gray-200 rounded-full h-1"},$s=J({__name:"NotificationToast",props:{show:{type:Boolean},type:{default:"info"},title:{},message:{},duration:{default:5e3},persistent:{type:Boolean,default:!1}},emits:["close"],setup(z,{emit:S}){const c=z,p=S,f=$(100);let v=null,s=null;const h=()=>{const r={success:"text-green-900",error:"text-red-900",warning:"text-yellow-900",info:"text-blue-900"};return r[c.type]||r.info},a=()=>{const r={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"};return r[c.type]||r.info},P=()=>{const r={success:"SuccÃ¨s",error:"Erreur",warning:"Attention",info:"Information"};return r[c.type]||r.info},I=()=>{n(),p("close")},n=()=>{v&&(clearInterval(v),v=null),s&&(clearTimeout(s),s=null)},b=()=>{if(c.persistent||!c.duration||c.duration<=0)return;f.value=100;const r=100,w=r/c.duration*100;v=De(()=>{f.value-=w,f.value<=0&&(f.value=0,n(),p("close"))},r),s=setTimeout(()=>{n(),p("close")},c.duration)};return me(()=>c.show,r=>{r?b():n()}),ae(()=>{c.show&&b()}),je(()=>{n()}),(r,w)=>(l(),Y(Le,{to:"body"},[pe(Xe,{"enter-active-class":"transform transition ease-out duration-300","enter-from-class":"translate-x-full opacity-0","enter-to-class":"translate-x-0 opacity-100","leave-active-class":"transform transition ease-in duration-200","leave-from-class":"translate-x-0 opacity-100","leave-to-class":"translate-x-full opacity-0"},{default:Ve(()=>[r.show?(l(),i("div",ps,[e("div",fs,[e("div",bs,[e("div",gs,[r.type==="success"?(l(),i("svg",ys,w[0]||(w[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):r.type==="error"?(l(),i("svg",xs,w[1]||(w[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):r.type==="warning"?(l(),i("svg",hs,w[2]||(w[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)]))):(l(),i("svg",ks,w[3]||(w[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))]),e("div",ws,[e("p",{class:V([h(),"text-sm font-medium"])},g(r.title||P()),3),r.message?(l(),i("p",Cs,g(r.message),1)):A("",!0)]),e("div",{class:"ml-4 flex-shrink-0 flex"},[e("button",{onClick:I,class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",type:"button"},w[4]||(w[4]=[e("span",{class:"sr-only"},"Fermer",-1),e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),r.duration&&r.duration>0?(l(),i("div",Ss,[e("div",{class:V([a(),"h-1 rounded-full transition-all duration-100 ease-linear"]),style:Be({width:`${f.value}%`})},null,6)])):A("",!0)])])):A("",!0)]),_:1})]))}}),_s=Q($s,[["__scopeId","data-v-31c739de"]]),Ms={class:"min-h-screen bg-gray-50"},Ps={class:"bg-white shadow-sm border-b border-gray-200"},Us={class:"px-8 py-6"},As={class:"flex items-center justify-between"},Is={class:"flex items-center space-x-4"},js={class:"p-8"},Xs={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Vs={class:"card-modern"},Ls={class:"flex items-center justify-between"},Bs={class:"text-2xl font-bold text-gray-900"},zs={class:"card-modern"},qs={class:"flex items-center justify-between mb-4"},Ds={class:"flex items-center"},Ks={class:"text-sm text-gray-500"},Es={key:0,class:"text-green-600"},Fs={key:1,class:"text-gray-400"},Ts={key:0,class:"w-3 h-3 bg-green-500 rounded-full"},Rs={class:"flex items-center justify-between"},Ws={class:"text-2xl font-bold text-gray-900"},Ns=["disabled"],Os={class:"card-modern"},Hs={class:"flex items-center justify-between mb-4"},Js={class:"flex items-center"},Qs={class:"text-sm text-gray-500"},Gs={key:0,class:"text-blue-600"},Zs={key:1,class:"text-gray-400"},Ys={key:0,class:"w-3 h-3 bg-blue-500 rounded-full"},eo={class:"flex items-center justify-between"},to={class:"text-2xl font-bold text-gray-900"},so=["disabled"],oo={key:0,class:"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4"},ro={class:"card-modern mb-6"},lo={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0"},ao={class:"flex-1 max-w-lg"},no={class:"relative"},io={class:"flex items-center space-x-4"},uo=["value"],co=["disabled"],vo={class:"card-modern"},mo={class:"flex items-center justify-between p-6 border-b border-gray-200"},po={class:"flex items-center space-x-4"},fo={class:"text-sm text-gray-500"},bo=["disabled"],go={key:0,class:"p-12"},yo={key:1,class:"p-12 text-center"},xo={class:"text-gray-500 mb-4"},ho={key:2,class:"p-6"},ko={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},wo={class:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},Co=["src","alt"],So={key:1,class:"w-full h-full flex items-center justify-center"},$o={class:"flex-1"},_o={class:"flex items-start justify-between mb-2"},Mo={class:"text-sm font-medium text-gray-900 line-clamp-2"},Po={key:0,class:"text-xs text-gray-500 line-clamp-2 mb-2"},Uo={class:"flex items-center justify-between mb-3"},Ao={class:"flex flex-col"},Io={class:"text-lg font-bold text-gray-900"},jo={key:0,class:"text-xs text-gray-400 line-through"},Xo={class:"text-right"},Vo={key:0,class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded block mb-1"},Lo={class:"mb-3"},Bo={class:"flex items-center space-x-2"},zo=["onClick"],qo=["onClick"],Do=["onClick","disabled"],Ko={key:3,class:"text-center py-12"},Eo={class:"mt-4 text-lg font-medium text-gray-900"},Fo={class:"mt-2 text-gray-500"},To={class:"mt-6"},Ro=J({__name:"products",setup(z){const{products:S,stats:c,loading:p,syncing:f,error:v,hasProducts:s,fetchProducts:h,fetchStats:a,deleteProduct:P,duplicateProduct:I,syncProducts:n,clearError:b,formatPrice:r,getSourceLabel:w,getSourceBadgeClass:te}=fe(),R=$(!1),F=$(!1),W=$(!1),y=$(!1),u=$(!1),x=$(""),M=$("success"),K=$(null),B=$({search:"",category:"",source:""}),C=$({shopify:{connected:!1,credentials:null,lastSync:null},woocommerce:{connected:!1,credentials:null,lastSync:null}}),D=H(()=>!!(B.value.search||B.value.category||B.value.source)),U=H(()=>c.value?.categories||[]),t=Ke(()=>{X()},300),d=async()=>{b(),await h(B.value),await a()},X=async()=>{b(),await h(B.value)},T=()=>{B.value={search:"",category:"",source:""},X()},le=()=>{K.value=null,R.value=!0},be=k=>{K.value=k,R.value=!0},ge=()=>{R.value=!1,K.value=null},ye=k=>{u.value=!0,x.value=k,M.value="success",d()},xe=async k=>{const o=await I(k.id);o.success?(u.value=!0,x.value="Produit dupliquÃ© avec succÃ¨s!",M.value="success",d()):(u.value=!0,x.value=o.error||"Erreur lors de la duplication",M.value="error")},he=async k=>{if(k.source!=="manual"){u.value=!0,x.value="Seuls les produits manuels peuvent Ãªtre supprimÃ©s",M.value="error";return}if(confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer "${k.name}" ?`)){const o=await P(k.id);o.success?(u.value=!0,x.value="Produit supprimÃ© avec succÃ¨s!",M.value="success",d()):(u.value=!0,x.value=o.error||"Erreur lors de la suppression",M.value="error")}},ke=()=>{C.value.shopify.connected?ue():ne()},we=()=>{C.value.woocommerce.connected?de():ie()},ne=()=>{F.value=!1,W.value=!0},ie=()=>{F.value=!1,y.value=!0},Ce=async()=>{const k=JSON.parse(localStorage.getItem("shopify_connection")||"{}");C.value.shopify={connected:!0,credentials:k,lastSync:null},u.value=!0,x.value="Boutique Shopify connectÃ©e avec succÃ¨s!",M.value="success",setTimeout(()=>{ue()},1e3)},Se=async()=>{const k=JSON.parse(localStorage.getItem("woocommerce_connection")||"{}");C.value.woocommerce={connected:!0,credentials:k,lastSync:null},u.value=!0,x.value="Boutique WooCommerce connectÃ©e avec succÃ¨s!",M.value="success",setTimeout(()=>{de()},1e3)},ue=async()=>{if(!C.value.shopify.credentials){u.value=!0,x.value="Aucune configuration Shopify trouvÃ©e",M.value="error";return}const k=await n("shopify",C.value.shopify.credentials);k.success?(C.value.shopify.lastSync=new Date().toISOString(),u.value=!0,x.value="Synchronisation Shopify terminÃ©e!",M.value="success",d()):(u.value=!0,x.value=k.error||"Erreur de synchronisation",M.value="error")},de=async()=>{if(!C.value.woocommerce.credentials){u.value=!0,x.value="Aucune configuration WooCommerce trouvÃ©e",M.value="error";return}const k=await n("woocommerce",C.value.woocommerce.credentials);k.success?(C.value.woocommerce.lastSync=new Date().toISOString(),u.value=!0,x.value="Synchronisation WooCommerce terminÃ©e!",M.value="success",d()):(u.value=!0,x.value=k.error||"Erreur de synchronisation",M.value="error")},$e=k=>{const o=k.target;o.style.display="none"},_e=k=>k<=0?"text-red-600":k<=10?"text-orange-600":"text-green-600",Me=k=>k<=0?"Rupture":k<=10?"Stock faible":`${k} en stock`,Pe=()=>{if(!s.value)return;const k=["Nom","Prix","CatÃ©gorie","Source","SKU","Stock","Statut"],o=S.value.map(E=>[E.name,E.price,E.category||"",w(E.source),E.sku||"",E.track_inventory?E.inventory_quantity:"Non suivi",E.is_active?"Actif":"Inactif"]),m=[k.join(","),...o.map(E=>E.map(Ae=>`"${Ae}"`).join(","))].join(`
`),se=new Blob([m],{type:"text/csv"}),ce=window.URL.createObjectURL(se),G=document.createElement("a");G.href=ce,G.download=`produits-chatseller-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(ce),u.value=!0,x.value=`${S.value.length} produit(s) exportÃ©(s) avec succÃ¨s!`,M.value="success"},Ue=()=>{try{const k=localStorage.getItem("shopify_connection");if(k){const m=JSON.parse(k);C.value.shopify={connected:!0,credentials:m,lastSync:m.lastSync||null}}const o=localStorage.getItem("woocommerce_connection");if(o){const m=JSON.parse(o);C.value.woocommerce={connected:!0,credentials:m,lastSync:m.lastSync||null}}}catch(k){console.warn("Erreur lors du chargement des connexions:",k)}};return ae(async()=>{await d(),Ue()}),qe({title:"Produits - ChatSeller Dashboard"}),(k,o)=>(l(),i("div",Ms,[e("div",Ps,[e("div",Us,[e("div",As,[o[11]||(o[11]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Catalogue Produits"),e("p",{class:"mt-2 text-gray-600"}," GÃ©rez votre catalogue pour que votre Vendeur IA connaisse vos produits ")],-1)),e("div",Is,[e("button",{onClick:o[0]||(o[0]=m=>F.value=!0),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"},o[9]||(o[9]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})],-1),oe(" Connecter une boutique ",-1)])),e("button",{onClick:le,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"},o[10]||(o[10]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),oe(" Ajouter un produit ",-1)]))])])])]),e("div",js,[e("div",Xs,[e("div",Vs,[o[13]||(o[13]=q('<div class="flex items-center justify-between mb-4" data-v-778c8848><div class="flex items-center" data-v-778c8848><div class="p-2 bg-purple-100 rounded-lg mr-3" data-v-778c8848><svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-778c8848><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" data-v-778c8848></path></svg></div><div data-v-778c8848><h3 class="text-lg font-semibold text-gray-900" data-v-778c8848>Produits manuels</h3><p class="text-sm text-gray-500" data-v-778c8848>AjoutÃ©s directement</p></div></div></div>',1)),e("div",Ls,[e("div",null,[e("p",Bs,g(j(c)?.bySource.manual||0),1),o[12]||(o[12]=e("p",{class:"text-xs text-gray-500"},"produits",-1))]),e("button",{onClick:le,class:"text-purple-600 hover:text-purple-700 text-sm font-medium"}," Ajouter â†’ ")])]),e("div",zs,[e("div",qs,[e("div",Ds,[o[15]||(o[15]=e("div",{class:"p-2 bg-green-100 rounded-lg mr-3"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})])],-1)),e("div",null,[o[14]||(o[14]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Shopify",-1)),e("p",Ks,[C.value.shopify.connected?(l(),i("span",Es,"ConnectÃ©")):(l(),i("span",Fs,"Non connectÃ©"))])])]),C.value.shopify.connected?(l(),i("div",Ts)):A("",!0)]),e("div",Rs,[e("div",null,[e("p",Ws,g(j(c)?.bySource.shopify||0),1),o[16]||(o[16]=e("p",{class:"text-xs text-gray-500"},"produits synchronisÃ©s",-1))]),e("button",{onClick:ke,disabled:j(f),class:"text-green-600 hover:text-green-700 text-sm font-medium disabled:opacity-50"},g(j(f)?"Sync...":C.value.shopify.connected?"Synchroniser":"Connecter")+" â†’ ",9,Ns)])]),e("div",Os,[e("div",Hs,[e("div",Js,[o[18]||(o[18]=e("div",{class:"p-2 bg-blue-100 rounded-lg mr-3"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"})])],-1)),e("div",null,[o[17]||(o[17]=e("h3",{class:"text-lg font-semibold text-gray-900"},"WooCommerce",-1)),e("p",Qs,[C.value.woocommerce.connected?(l(),i("span",Gs,"ConnectÃ©")):(l(),i("span",Zs,"Non connectÃ©"))])])]),C.value.woocommerce.connected?(l(),i("div",Ys)):A("",!0)]),e("div",eo,[e("div",null,[e("p",to,g(j(c)?.bySource.woocommerce||0),1),o[19]||(o[19]=e("p",{class:"text-xs text-gray-500"},"produits synchronisÃ©s",-1))]),e("button",{onClick:we,disabled:j(f),class:"text-blue-600 hover:text-blue-700 text-sm font-medium disabled:opacity-50"},g(j(f)?"Sync...":C.value.woocommerce.connected?"Synchroniser":"Connecter")+" â†’ ",9,so)])])]),j(f)?(l(),i("div",oo,o[20]||(o[20]=[q('<div class="flex items-center" data-v-778c8848><div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3" data-v-778c8848></div><div class="flex-1" data-v-778c8848><h3 class="text-sm font-medium text-blue-800" data-v-778c8848>Synchronisation en cours...</h3><p class="text-sm text-blue-700" data-v-778c8848> Importation des produits depuis votre boutique connectÃ©e. </p></div></div>',1)]))):A("",!0),e("div",ro,[e("div",lo,[e("div",ao,[e("div",no,[o[21]||(o[21]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),_(e("input",{"onUpdate:modelValue":o[1]||(o[1]=m=>B.value.search=m),onInput:o[2]||(o[2]=(...m)=>j(t)&&j(t)(...m)),type:"text",placeholder:"Rechercher un produit...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,544),[[L,B.value.search]])])]),e("div",io,[_(e("select",{"onUpdate:modelValue":o[3]||(o[3]=m=>B.value.source=m),onChange:X,class:"input-modern"},o[22]||(o[22]=[e("option",{value:""},"Toutes les sources",-1),e("option",{value:"manual"},"Manuel",-1),e("option",{value:"shopify"},"Shopify",-1),e("option",{value:"woocommerce"},"WooCommerce",-1)]),544),[[re,B.value.source]]),_(e("select",{"onUpdate:modelValue":o[4]||(o[4]=m=>B.value.category=m),onChange:X,class:"input-modern"},[o[23]||(o[23]=e("option",{value:""},"Toutes les catÃ©gories",-1)),(l(!0),i(N,null,O(U.value,m=>(l(),i("option",{key:m.name,value:m.name},g(m.name)+" ("+g(m.count)+") ",9,uo))),128))],544),[[re,B.value.category]]),e("button",{onClick:Pe,disabled:!j(s),class:"text-blue-600 hover:text-blue-700 text-sm font-medium disabled:opacity-50"}," Exporter CSV ",8,co)])])]),e("div",vo,[e("div",mo,[o[24]||(o[24]=e("h2",{class:"text-lg font-semibold text-gray-900"}," Catalogue produits ",-1)),e("div",po,[e("span",fo,g(j(c)?.total||0)+" produit(s) ",1),e("button",{onClick:d,disabled:j(p),class:"text-blue-600 hover:text-blue-700 text-sm font-medium disabled:opacity-50"},g(j(p)?"Actualisation...":"Actualiser"),9,bo)])]),j(p)?(l(),i("div",go,o[25]||(o[25]=[e("div",{class:"flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e("span",{class:"ml-3 text-gray-600"},"Chargement des produits...")],-1)]))):j(v)?(l(),i("div",yo,[o[26]||(o[26]=e("div",{class:"text-red-500 mb-4"},[e("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o[27]||(o[27]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Erreur de chargement",-1)),e("p",xo,g(j(v)),1),e("button",{onClick:d,class:"btn-primary"}," RÃ©essayer ")])):j(s)?(l(),i("div",ho,[e("div",ko,[(l(!0),i(N,null,O(j(S),m=>(l(),i("div",{key:m.id,class:"product-card"},[e("div",wo,[m.featured_image||m.images?.[0]?(l(),i("img",{key:0,src:m.featured_image||m.images[0],alt:m.name,class:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",onError:$e},null,40,Co)):(l(),i("div",So,o[28]||(o[28]=[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),e("div",$o,[e("div",_o,[e("h3",Mo,g(m.name),1),e("span",{class:V([j(te)(m.source),"source-badge ml-2"])},g(j(w)(m.source)),3)]),m.description?(l(),i("p",Po,g(m.description),1)):A("",!0),e("div",Uo,[e("div",Ao,[e("span",Io,g(j(r)(m.price)),1),m.compare_at_price&&m.compare_at_price>m.price?(l(),i("span",jo,g(j(r)(m.compare_at_price)),1)):A("",!0)]),e("div",Xo,[m.category?(l(),i("span",Vo,g(m.category),1)):A("",!0),m.track_inventory?(l(),i("span",{key:1,class:V(["text-xs",_e(m.inventory_quantity)])},g(Me(m.inventory_quantity)),3)):A("",!0)])]),e("div",Lo,[e("span",{class:V([m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},g(m.is_active?"Actif":"Inactif"),3)]),e("div",Bo,[e("button",{onClick:se=>be(m),class:"flex-1 text-xs bg-blue-50 text-blue-700 hover:bg-blue-100 px-3 py-2 rounded-lg transition-colors"}," Modifier ",8,zo),e("button",{onClick:se=>xe(m),class:"text-xs bg-gray-50 text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",title:"Dupliquer"},o[29]||(o[29]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,qo),e("button",{onClick:se=>he(m),disabled:m.source!=="manual",class:"text-xs bg-red-50 text-red-700 hover:bg-red-100 px-3 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Supprimer"},o[30]||(o[30]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Do)])])]))),128))])])):(l(),i("div",Ko,[o[32]||(o[32]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1)),e("h3",Eo,g(D.value?"Aucun produit trouvÃ©":"Aucun produit dans votre catalogue"),1),e("p",Fo,g(D.value?"Aucun produit ne correspond Ã  vos critÃ¨res de recherche":"Commencez par ajouter des produits manuellement ou connecter votre boutique"),1),e("div",To,[D.value?(l(),i("button",{key:1,onClick:T,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-blue-600 bg-blue-100 hover:bg-blue-200 transition-colors"}," Effacer les filtres ")):(l(),i("button",{key:0,onClick:le,class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors"},o[31]||(o[31]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),oe(" Ajouter votre premier produit ",-1)])))])]))])]),R.value?(l(),Y(Ct,{key:0,product:K.value,onClose:ge,onSuccess:ye},null,8,["product"])):A("",!0),F.value?(l(),Y(Ut,{key:1,onClose:o[5]||(o[5]=m=>F.value=!1),onConnectShopify:ne,onConnectWoocommerce:ie})):A("",!0),W.value?(l(),Y(Ht,{key:2,onClose:o[6]||(o[6]=m=>W.value=!1),onSuccess:Ce})):A("",!0),y.value?(l(),Y(ms,{key:3,onClose:o[7]||(o[7]=m=>y.value=!1),onSuccess:Se})):A("",!0),pe(_s,{show:u.value,message:x.value,type:M.value,onClose:o[8]||(o[8]=m=>u.value=!1)},null,8,["show","message","type"])]))}}),Qo=Q(Ro,[["__scopeId","data-v-778c8848"]]);export{Qo as default};
